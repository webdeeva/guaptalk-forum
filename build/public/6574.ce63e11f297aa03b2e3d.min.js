"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[6574],{6574:(v,b,r)=>{var m,g;m=[r(91749),r(52473),r(49897),r(29930)],g=function(s,A,c,t){const l={};let n,o,a;l.showFlagModal=function(e){e.remote=URL.canParse(e.id)?new URL(e.id).hostname:!1,app.parseAndTranslate("modals/flag",e,function(f){n=f,n.on("hidden.bs.modal",function(){n.remove()}),o=n.find("#flag-post-commit"),a=n.find("#flag-reason-custom"),n.on("click",'input[name="flag-reason"]',function(){$(this).attr("id")==="flag-reason-other"?(a.removeAttr("disabled"),a.val().length||o.attr("disabled",!0)):(a.attr("disabled",!0),o.removeAttr("disabled"))}),o.on("click",function(){const i=$('input[name="flag-reason"]:checked');let d=i.val();i.attr("id")==="flag-reason-other"&&(d=a.val());const u=$('input[name="flag-notify-remote"]').is(":checked");E(e.type,e.id,d,u)}),n.on("click","#flag-reason-other",function(){a.focus()}),n.modal("show"),s.fire("action:flag.showModal",{modalEl:n,type:e.type,id:e.id,remote:e.remote}),n.find("#flag-reason-custom").on("keyup blur change",y)})},l.resolve=function(e){c.put(`/flags/${e}`,{state:"resolved"}).then(()=>{t.success("[[flags:resolved]]"),s.fire("action:flag.resolved",{flagId:e})}).catch(t.error)},l.rescind=function(e){c.del(`/flags/${e}/report`).then(()=>{t.success("[[flags:report-rescinded]]"),s.fire("action:flag.rescinded",{flagId:e})}).catch(t.error)},l.purge=function(e){c.del(`/flags/${e}`).then(()=>{t.success("[[flags:purged]]"),s.fire("action:flag.purged",{flagId:e})}).catch(t.error)};function E(e,f,i,d=!1){if(!e||!f||!i)return;const u={type:e,id:f,reason:i,notifyRemote:d};c.post("/flags",u,function(p,R){if(p)return t.error(p);if(n.modal("hide"),t.success("[[flags:modal-submit-success]]"),e==="post"){const h=A.get("post","pid",f);h.find('[component="post/flag"]').addClass("hidden").parent().attr("hidden",""),h.find('[component="post/already-flagged"]').removeClass("hidden").parent().attr("hidden",null)}s.fire("action:flag.create",{flagId:R,data:u})})}function y(){n.find("#flag-reason-custom").val()?o.removeAttr("disabled"):o.attr("disabled",!0)}return l}.apply(b,m),g!==void 0&&(v.exports=g)}}]);
