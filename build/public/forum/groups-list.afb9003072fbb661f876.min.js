"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,34271,45490,49897,99127],{37130:(m,d,a)=>{var c,p;c=[a(49897),a(33530),a(29930)],p=function(l,x,g){const n={};n.init=function(){$('button[data-action="new"]').on("click",function(){x.prompt("[[groups:new-group.group-name]]",function(o){o&&o.length&&l.post("/groups",{name:o}).then(u=>{ajaxify.go("groups/"+u.slug)}).catch(g.error)})});const i=utils.params();$("#search-sort").val(i.sort||"alpha"),$("#search-text").on("keyup",utils.debounce(n.search,200)),$("#search-button").on("click",n.search),$("#search-sort").on("change",function(){ajaxify.go("groups?sort="+$("#search-sort").val())})},n.search=function(){return l.get("/api/groups",{query:$("#search-text").val(),sort:$("#search-sort").val(),filterHidden:!0,showMembers:!0,hideEphemeralGroups:!0}).then(f).catch(g.error),!1};function f(i){app.parseAndTranslate("partials/paginator",{pagination:i.pagination}).then(function(u){$(".pagination-container").replaceWith(u)});const o=$("#groups-list");app.parseAndTranslate("partials/groups/list",{groups:i.groups}).then(function(u){o.empty().append(u)})}return n}.apply(d,c),p!==void 0&&(m.exports=p)},49897:(m,d,a)=>{a.r(d),a.d(d,{del:()=>P,get:()=>i,head:()=>o,patch:()=>A,post:()=>u,put:()=>D});var c=a(91749),p=a.n(c),l=a(33530),x=a.n(l);const g=config.relative_path+"/api/v3";async function n(t,r){if(t.url=t.url.startsWith("/api")?config.relative_path+t.url:g+t.url,typeof r=="function"){f(t).then(e=>r(null,e),e=>r(e));return}try{return await f(t)}catch(e){if(e.message==="A valid login session was not found. Please log in and try again."){const{url:h}=await(0,c.fire)("filter:admin.reauth",{url:"login"});return(0,l.confirm)("[[error:api.reauth-required]]",E=>{E&&ajaxify.go(h)})}throw e}}async function f(t){const{url:r}=t;delete t.url,t.data&&!(t.data instanceof FormData)&&(t.data=JSON.stringify(t.data||{}),t.headers["content-type"]="application/json; charset=utf-8"),{options:t}=await(0,c.fire)("filter:api.options",{options:t}),t.data&&(t.body=t.data,delete t.data);const e=await fetch(r,t),{headers:h}=e;if(h.get("x-redirect"))return f({url:h.get("x-redirect"),...t});const E=h.get("content-type"),y=E&&E.startsWith("application/json");let s;if(t.method!=="HEAD"&&(y?s=await e.json():s=await e.text()),!e.ok)throw s?new Error(y?s.status.message:s):new Error(e.statusText);return y&&s&&s.hasOwnProperty("status")&&s.hasOwnProperty("response")?s.response:s}function i(t,r,e){return n({url:t+(r&&Object.keys(r).length?"?"+$.param(r):"")},e)}function o(t,r,e){return n({url:t+(r&&Object.keys(r).length?"?"+$.param(r):""),method:"HEAD"},e)}function u(t,r,e){return n({url:t,method:"POST",data:r,headers:{"x-csrf-token":config.csrf_token}},e)}function A(t,r,e){return n({url:t,method:"PATCH",data:r,headers:{"x-csrf-token":config.csrf_token}},e)}function D(t,r,e){return n({url:t,method:"PUT",data:r,headers:{"x-csrf-token":config.csrf_token}},e)}function P(t,r,e){return n({url:t,method:"DELETE",data:r,headers:{"x-csrf-token":config.csrf_token}},e)}}}]);
