(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,4884,5719,16852,34271,42289,43400,49897,97082,99127],{7524:(v,b,s)=>{"use strict";var y,h;y=[s(72254),s(49897),s(33530),s(29930)],h=((p,i,f,a)=>{const o={};o.openChangeModal=()=>{socket.emit("user.getProfilePictures",{uid:ajaxify.data.uid},function(n,c){if(n)return a.error(n);const r=c.reduce(function(u,e){return u||e.type==="uploaded"},!1);app.parseAndTranslate("modals/change-picture",{pictures:c,uploaded:r,icon:{text:ajaxify.data["icon:text"],bgColor:ajaxify.data["icon:bgColor"]},defaultAvatar:ajaxify.data.defaultAvatar,allowProfileImageUploads:ajaxify.data.allowProfileImageUploads,iconBackgrounds:ajaxify.data.iconBackgrounds,user:{uid:ajaxify.data.uid,username:ajaxify.data.username,picture:ajaxify.data.picture,"icon:text":ajaxify.data["icon:text"],"icon:bgColor":ajaxify.data["icon:bgColor"]}},function(u){const e=f.dialog({className:"picture-switcher",title:"[[user:change-picture]]",message:u,show:!0,size:"large",buttons:{close:{label:"[[global:close]]",callback:D,className:"btn-link"},update:{label:"[[global:save-changes]]",callback:g}}});e.on("shown.bs.modal",l),e.on("click",".list-group-item",function(){e.find(".list-group-item").removeClass("active"),$(this).addClass("active")}),e.on("click","[data-bg-color]",function(){const x=$(this).attr("data-bg-color");$(this).addClass("selected").siblings().removeClass("selected"),e.find('[component="avatar/icon"]').css("background-color",x)}),t(e);function l(){ajaxify.data.picture?e.find(".list-group-item img").each(function(){this.getAttribute("src")===ajaxify.data.picture&&$(this).parents(".list-group-item").addClass("active")}):e.find('[data-type="default"]').addClass("active");const x=e.find(`[data-bg-color="${ajaxify.data["icon:bgColor"]}"]`);x.length?x.addClass("selected"):e.find('[data-bg-color="transparent"]').addClass("selected")}function g(){const x=e.find(".list-group-item.active").attr("data-type"),w=e.find("[data-bg-color].selected").attr("data-bg-color")||"transparent";d(x,w).then(()=>{o.updateHeader(x==="default"?"":e.find(".list-group-item.active img").attr("src"),w),ajaxify.refresh()}).catch(a.error)}function D(){e.modal("hide")}})})},o.updateHeader=(n,c)=>{if(parseInt(ajaxify.data.theirid,10)!==parseInt(ajaxify.data.yourid,10))return;!n&&ajaxify.data.defaultAvatar&&(n=ajaxify.data.defaultAvatar);const r=$('[component="header/avatar"] [component="avatar/picture"]'),u=$('[component="header/avatar"] [component="avatar/icon"]');if(n){if(!r.length&&u.length){const e=$("<img/>");$(u[0].attributes).each(function(){e.attr(this.nodeName,this.nodeValue)}),e.attr("component","avatar/picture").attr("src",n).insertBefore(u)}}else r.remove();c&&u.css({"background-color":c})};function t(n){function c(u){u=(u.startsWith("http")?"":config.relative_path)+u;const e=u+"?"+Date.now();o.updateHeader(e),ajaxify.data.picture&&ajaxify.data.picture.length?($(`#user-current-picture, img[data-uid="${ajaxify.data.theirid}"].avatar`).attr("src",e),ajaxify.data.uploadedpicture=u,ajaxify.data.picture=u):ajaxify.refresh(function(){$(`#user-current-picture, img[data-uid="${ajaxify.data.theirid}"].avatar`).attr("src",e)})}function r(){ajaxify.data.uploadedpicture===ajaxify.data.picture&&(ajaxify.refresh(),o.updateHeader())}n.find('[data-action="upload"]').on("click",function(){return n.modal("hide"),p.show({socketMethod:"user.uploadCroppedPicture",route:config.relative_path+"/api/user/"+ajaxify.data.userslug+"/uploadpicture",aspectRatio:1/1,paramName:"uid",paramValue:ajaxify.data.theirid,fileSize:ajaxify.data.maximumProfileImageSize,allowSkippingCrop:!1,title:"[[user:upload-picture]]",description:"[[user:upload-a-picture]]",accept:ajaxify.data.allowedProfileImageExtensions},function(u){c(u)}),!1}),n.find('[data-action="upload-url"]').on("click",function(){return n.modal("hide"),app.parseAndTranslate("modals/upload-picture-from-url",{},function(u){u.modal("show"),u.find(".upload-btn").on("click",function(){const e=u.find("#uploadFromUrl").val();return e&&(u.modal("hide"),p.handleImageCrop({url:e,socketMethod:"user.uploadCroppedPicture",aspectRatio:1,allowSkippingCrop:!1,paramName:"uid",paramValue:ajaxify.data.theirid},c)),!1})}),!1}),n.find('[data-action="remove-uploaded"]').on("click",function(){socket.emit("user.removeUploadedPicture",{uid:ajaxify.data.theirid},function(u){if(n.modal("hide"),u)return a.error(u);r()})})}function d(n,c){return i.put(`/users/${ajaxify.data.theirid}/picture`,{type:n,bgColor:c})}return o}).apply(b,y),h!==void 0&&(v.exports=h)},18675:()=>{(function(v){var b=v(window),s=function(i,f,a,o){if(arguments.length===3||o){if(a<i)return i;if(a>f)return f}return a},y=function(i){i.clientX=i.originalEvent.touches[0].clientX,i.clientY=i.originalEvent.touches[0].clientY},h=function(i){var f=(i.css("background-image").match(/^url\(['"]?(.*?)['"]?\)$/i)||[])[1];if(f){var a={width:0,height:0},o=new Image;return o.onload=function(){if(i.css("background-size")=="cover"){var t=i.innerWidth(),d=i.innerHeight(),n=t/d,c=o.width/o.height,r=1;c>=n?r=d/o.height:r=t/o.width,a.width=o.width*r,a.height=o.height*r}else a.width=o.width,a.height=o.height},o.src=f,a}};function p(i,f){this.element=i,this.options=f,this.init()}p.prototype.init=function(){var i=v(this.element),f=(i.css("background-image").match(/^url\(['"]?(.*?)['"]?\)$/i)||[])[1],a=this.options;if(f){var o={width:0,height:0};(a.bound||a.units=="percent")&&(o=h(i)),v(window).on("keydown.dbg",t=>{var d=i.css("background-position").match(/(-?\d+).*?\s(-?\d+)/)||[],n=parseInt(d[1])||0,c=parseInt(d[2])||0;a.units=="percent"&&(n=Math.round(n/-200*o.width),c=Math.round(c/-200*o.height));var r=0,u=0;return t.which===37?r=-5:t.which===39?r=5:t.which===38?u=-5:t.which===40&&(u=5),a.units==="percent"?(n=a.axis==="y"?n:s(-o.width/2,0,n+r,a.bound),c=a.axis==="x"?c:s(-o.height/2,0,c+u,a.bound),i.css("background-position",n/o.width*-200+"% "+c/o.height*-200+"%")):(n=a.axis==="y"?n:s(i.innerWidth()-o.width,0,n+r,a.bound),c=a.axis==="x"?c:s(i.innerHeight()-o.height,0,c+u,a.bound)),[37,38,39,40].includes(t.which)?!1:void 0}),i.on("mousedown.dbg touchstart.dbg",function(t){if(t.target===i[0]){if(t.preventDefault(),t.originalEvent.touches)y(t);else if(t.which!==1)return;var d=t.clientX,n=t.clientY,c=i.css("background-position").match(/(-?\d+).*?\s(-?\d+)/)||[],r=parseInt(c[1])||0,u=parseInt(c[2])||0;a.units=="percent"&&(r=Math.round(r/-200*o.width),u=Math.round(u/-200*o.height)),b.on("mousemove.dbg touchmove.dbg",function(e){e.preventDefault(),e.originalEvent.touches&&y(e);var l=e.clientX,g=e.clientY;a.units=="percent"?(r=a.axis==="y"?r:s(-o.width/2,0,r+l-d,a.bound),u=a.axis==="x"?u:s(-o.height/2,0,u+g-n,a.bound),i.css("background-position",r/o.width*-200+"% "+u/o.height*-200+"%")):(r=a.axis==="y"?r:s(i.innerWidth()-o.width,0,r+l-d,a.bound),u=a.axis==="x"?u:s(i.innerHeight()-o.height,0,u+g-n,a.bound),i.css("background-position",r+"px "+u+"px")),d=l,n=g}),b.on("mouseup.dbg touchend.dbg mouseleave.dbg",function(){a.done&&a.done(),b.off("mousemove.dbg touchmove.dbg"),b.off("mouseup.dbg touchend.dbg mouseleave.dbg")})}})}},p.prototype.disable=function(){var i=v(this.element);i.off("mousedown.dbg touchstart.dbg"),b.off("mousemove.dbg touchmove.dbg mouseup.dbg touchend.dbg mouseleave.dbg keydown.dbg")},v.fn.backgroundDraggable=function(i){var f=Array.prototype.slice.call(arguments,1);return this.each(function(){var a=v(this),o;typeof i>"u"||typeof i=="object"?(i=v.extend({},v.fn.backgroundDraggable.defaults,i),o=new p(this,i),a.data("dbg",o)):typeof i=="string"&&a.data("dbg")&&(o=a.data("dbg"),p.prototype[i].apply(o,f))})},v.fn.backgroundDraggable.defaults={bound:!0,axis:void 0,units:"pixels"}})(jQuery)},28061:(v,b,s)=>{"use strict";var y,h;y=[s(81335),s(49897),s(33530),s(29930)],h=function(p,i,f,a){const o={};o.banAccount=function(d,n){d=d||ajaxify.data.theirid,t({tpl:"modals/temporary-ban",title:"[[user:ban-account]]",onSubmit:function(c){const r=c.length>0?Date.now()+c.length*1e3*60*60*(parseInt(c.unit,10)?24:1):0;i.put("/users/"+d+"/ban",{until:r,reason:c.reason||""}).then(()=>{if(typeof n=="function")return n();ajaxify.refresh()}).catch(a.error)}})},o.unbanAccount=function(d){t({tpl:"modals/unban",title:"[[user:unban-account]]",onSubmit:function(n){i.del("/users/"+d+"/ban",{reason:n.reason||""}).then(()=>{ajaxify.refresh()}).catch(a.error)}})},o.muteAccount=function(d,n){d=d||ajaxify.data.theirid,t({tpl:"modals/temporary-mute",title:"[[user:mute-account]]",onSubmit:function(c){const r=c.length>0?Date.now()+c.length*1e3*60*60*(parseInt(c.unit,10)?24:1):0;i.put("/users/"+d+"/mute",{until:r,reason:c.reason||""}).then(()=>{if(typeof n=="function")return n();ajaxify.refresh()}).catch(a.error)}})},o.unmuteAccount=function(d){t({tpl:"modals/unmute",title:"[[user:unmute-account]]",onSubmit:function(n){i.del("/users/"+d+"/mute",{reason:n.reason||""}).then(()=>{ajaxify.refresh()}).catch(a.error)}})};function t(d){p.render(d.tpl,{}).then(function(n){const c=f.dialog({title:d.title,message:n,show:!0,onEscape:!0,buttons:{close:{label:"[[global:close]]",className:"btn-link"},submit:{label:d.title,callback:function(){const r=c.find("form").serializeArray().reduce(function(u,e){return u[e.name]=e.value,u},{});d.onSubmit(r)}}}})})}return o}.apply(b,y),h!==void 0&&(v.exports=h)},36684:(v,b,s)=>{"use strict";var y,h;y=[s(29930),s(18675)],h=function(p){const i={coverEl:null,saveFn:null};i.init=function(a,o,t,d){i.coverEl=a,i.saveFn=o,a.find(".upload").on("click",t),a.find(".resize").on("click",function(){f(a)}),a.find(".remove").on("click",d),a.on("dragover",i.onDragOver).on("drop",i.onDrop),a.find(".save").on("click",i.save),a.addClass("initialised")},i.onDragOver=function(a){a.stopPropagation(),a.preventDefault(),a.originalEvent.dataTransfer.dropEffect="copy"},i.onDrop=function(a){a.stopPropagation(),a.preventDefault();const o=a.originalEvent.dataTransfer.files,t=new FileReader;o.length&&o[0].type.match("image.*")&&(t.onload=function(d){i.coverEl.css("background-image","url("+d.target.result+")"),i.newCover=d.target.result},t.readAsDataURL(o[0]),f(i.coverEl))};function f(a){a.toggleClass("active",1).backgroundDraggable({axis:"y",units:"percent"}),p.alert({alert_id:"drag_start",title:"[[modules:cover.dragging-title]]",message:"[[modules:cover.dragging-message]]",timeout:5e3})}return i.save=function(){i.coverEl.addClass("saving"),i.saveFn(i.newCover||void 0,i.coverEl.css("background-position"),function(a){a?p.error(a):(i.coverEl.toggleClass("active",0),i.coverEl.backgroundDraggable("disable"),i.coverEl.off("dragover",i.onDragOver),i.coverEl.off("drop",i.onDrop),p.success("[[modules:cover.saved]]")),i.coverEl.removeClass("saving")})},i}.apply(b,y),h!==void 0&&(v.exports=h)},47283:(v,b,s)=>{"use strict";var y,h;y=[s(49897),s(33530),s(29930)],h=function(p,i,f){const a={};a.account=function(t,d){o(t,"[[user:delete-this-account-confirm]]","/account","[[user:account-deleted]]",d)},a.content=function(t,d){o(t,"[[user:delete-account-content-confirm]]","/content","[[user:account-content-deleted]]",d)},a.purge=function(t,d){o(t,"[[user:delete-all-confirm]]","","[[user:account-deleted]]",d)};function o(t,d,n,c,r){i.confirm(d,function(u){u&&p.del(`/users/${encodeURIComponent(t)}${n}`,{}).then(()=>{if(f.success(c),typeof r=="function")return r()}).catch(f.error)})}return a}.apply(b,y),h!==void 0&&(v.exports=h)},49897:(v,b,s)=>{"use strict";s.r(b),s.d(b,{del:()=>u,get:()=>t,head:()=>d,patch:()=>c,post:()=>n,put:()=>r});var y=s(91749),h=s.n(y),p=s(33530),i=s.n(p);const f=config.relative_path+"/api/v3";async function a(e,l){if(e.url=e.url.startsWith("/api")?config.relative_path+e.url:f+e.url,typeof l=="function"){o(e).then(g=>l(null,g),g=>l(g));return}try{return await o(e)}catch(g){if(g.message==="A valid login session was not found. Please log in and try again."){const{url:D}=await(0,y.fire)("filter:admin.reauth",{url:"login"});return(0,p.confirm)("[[error:api.reauth-required]]",x=>{x&&ajaxify.go(D)})}throw g}}async function o(e){const{url:l}=e;delete e.url,e.data&&!(e.data instanceof FormData)&&(e.data=JSON.stringify(e.data||{}),e.headers["content-type"]="application/json; charset=utf-8"),{options:e}=await(0,y.fire)("filter:api.options",{options:e}),e.data&&(e.body=e.data,delete e.data);const g=await fetch(l,e),{headers:D}=g;if(D.get("x-redirect"))return o({url:D.get("x-redirect"),...e});const x=D.get("content-type"),w=x&&x.startsWith("application/json");let E;if(e.method!=="HEAD"&&(w?E=await g.json():E=await g.text()),!g.ok)throw E?new Error(w?E.status.message:E):new Error(g.statusText);return w&&E&&E.hasOwnProperty("status")&&E.hasOwnProperty("response")?E.response:E}function t(e,l,g){return a({url:e+(l&&Object.keys(l).length?"?"+$.param(l):"")},g)}function d(e,l,g){return a({url:e+(l&&Object.keys(l).length?"?"+$.param(l):""),method:"HEAD"},g)}function n(e,l,g){return a({url:e,method:"POST",data:l,headers:{"x-csrf-token":config.csrf_token}},g)}function c(e,l,g){return a({url:e,method:"PATCH",data:l,headers:{"x-csrf-token":config.csrf_token}},g)}function r(e,l,g){return a({url:e,method:"PUT",data:l,headers:{"x-csrf-token":config.csrf_token}},g)}function u(e,l,g){return a({url:e,method:"DELETE",data:l,headers:{"x-csrf-token":config.csrf_token}},g)}},67910:(v,b,s)=>{"use strict";var y,h;y=[s(36684),s(72254),s(52473),s(17459),s(47283),s(28061),s(7524),s(49897),s(33530),s(29930)],h=function(p,i,f,a,o,t,d,n,c,r){const u={};let e;u.init=function(){e=ajaxify.data.isAdmin||ajaxify.data.isSelf||ajaxify.data.isGlobalModerator,l(),g(),e&&D(),f.get("account/follow").on("click",()=>x("follow")),f.get("account/unfollow").on("click",()=>x("unfollow")),f.get("account/chat").on("click",async function(){const{roomId:m}=await n.get(`/users/${encodeURIComponent(ajaxify.data.uid)}/chat`),C=await app.require("chat");m?C.openChat(m):C.newChat(ajaxify.data.uid)}),f.get("account/new-chat").on("click",async function(){(await app.require("chat")).newChat(ajaxify.data.uid,function(){f.get("account/chat").parent().removeClass("hidden")})}),f.get("account/ban").on("click",()=>t.banAccount(ajaxify.data.theirid)),f.get("account/mute").on("click",()=>t.muteAccount(ajaxify.data.theirid)),f.get("account/unban").on("click",()=>t.unbanAccount(ajaxify.data.theirid)),f.get("account/unmute").on("click",()=>t.unmuteAccount(ajaxify.data.theirid)),f.get("account/delete-account").on("click",()=>o.account(ajaxify.data.theirid)),f.get("account/delete-content").on("click",()=>o.content(ajaxify.data.theirid)),f.get("account/delete-all").on("click",()=>o.purge(ajaxify.data.theirid)),f.get("account/flag").on("click",w),f.get("account/already-flagged").on("click",E),f.get("account/block").on("click",()=>j("block")),f.get("account/unblock").on("click",()=>j("unblock"))};function l(){$(".account-sub-links li a").removeClass("active").each(function(){const m=$(this).attr("href");if(decodeURIComponent(m)===decodeURIComponent(window.location.pathname))return $(this).addClass("active"),!1})}function g(){$('[component="profile/change/picture"]').on("click",function(){return d.openChangeModal(),!1})}function D(){p.init(f.get("account/cover"),function(m,C,A){socket.emit("user.updateCover",{uid:ajaxify.data.uid,imageData:m,position:C},A)},function(){i.show({title:"[[user:upload-cover-picture]]",socketMethod:"user.updateCover",aspectRatio:NaN,allowSkippingCrop:!0,restrictImageDimension:!1,paramName:"uid",paramValue:ajaxify.data.theirid,accept:".png,.jpg,.bmp"},function(m){m=(m.startsWith("http")?"":config.relative_path)+m+"?"+Date.now(),f.get("account/cover").css("background-image","url("+m+")")})},k)}function x(m){const C=isFinite(ajaxify.data.uid)?ajaxify.data.uid:encodeURIComponent(ajaxify.data.userslug);return n[m==="follow"?"put":"del"]("/users/"+C+"/follow",void 0,function(A){if(A)return r.error(A);f.get("account/follow").toggleClass("hide",m==="follow"),f.get("account/unfollow").toggleClass("hide",m==="unfollow"),r.success("[[global:alert."+m+", "+ajaxify.data.username+"]]")}),!1}function w(){s.e(6574).then(function(){var m=[s(6574)];(function(C){C.showFlagModal({type:"user",id:ajaxify.data.uid})}).apply(null,m)}).catch(s.oe)}function E(){const m=$(this).data("flag-id");s.e(6574).then(function(){var C=[s(6574)];(function(A){c.confirm("[[flags:modal-confirm-rescind]]",function(I){I&&A.rescind(m)})}).apply(null,C)}).catch(s.oe)}function j(m){return socket.emit("user.toggleBlock",{blockeeUid:ajaxify.data.uid,blockerUid:app.user.uid,action:m},function(C,A){if(C)return r.error(C);f.get("account/block").toggleClass("hidden",A),f.get("account/unblock").toggleClass("hidden",!A)}),!1}function k(){a.translate("[[user:remove-cover-picture-confirm]]",function(m){c.confirm(m,function(C){C&&socket.emit("user.removeCover",{uid:ajaxify.data.uid},function(A){A?r.error(A):ajaxify.refresh()})})})}return u}.apply(b,y),h!==void 0&&(v.exports=h)},72254:(v,b,s)=>{"use strict";var y,h;y=[s(29930)],h=function(p){const i={};i.show=function(t,d){const n=t.hasOwnProperty("fileSize")&&t.fileSize!==void 0?parseInt(t.fileSize,10):!1;app.parseAndTranslate("modals/upload-file",{showHelp:t.hasOwnProperty("showHelp")&&t.showHelp!==void 0?t.showHelp:!0,fileSize:n,title:t.title||"[[global:upload-file]]",description:t.description||"",button:t.button||"[[global:upload]]",accept:t.accept?t.accept.replace(/,/g,"&#44; "):""},function(c){c.modal("show"),c.on("hidden.bs.modal",function(){c.remove()});const r=c.find("#uploadForm");t.route&&r.attr("action",t.route),c.find("#fileUploadSubmitBtn").on("click",function(){return $(this).addClass("disabled"),t.uploadModal=c,o(t,d),!1})})},i.handleImageCrop=function(t,d){$("#crop-picture-modal").remove(),app.parseAndTranslate("modals/crop_picture",{url:utils.escapeHTML(t.url)},async function(n){n.modal({backdrop:"static"}).modal("show");const c=parseInt($(window).height()/2,10),r=document.getElementById("cropped-image");$(r).css("max-height",c);const u=(await s.e(60239).then(s.t.bind(s,65643,23))).default;let e=new u(r,{aspectRatio:t.aspectRatio,autoCropArea:1,viewMode:1,checkCrossOrigin:!0,cropmove:function(){t.restrictImageDimension&&(e.cropBoxData.width>t.imageDimension&&e.setCropBoxData({width:t.imageDimension}),e.cropBoxData.height>t.imageDimension&&e.setCropBoxData({height:t.imageDimension}))},ready:function(){if(!a(e,t))return n.modal("hide");if(t.restrictImageDimension){const l=r.width<r.height?r.width:r.height,g=l>t.imageDimension?t.imageDimension:l;e.setCropBoxData({width:g,height:g})}n.find(".rotate").on("click",function(){const l=this.getAttribute("data-degrees");e.rotate(l)}),n.find(".flip").on("click",function(){const l=this.getAttribute("data-option");this.getAttribute("data-method")==="scaleX"?e.scaleX(l):e.scaleY(l),this.setAttribute("data-option",l*-1)}),n.find(".reset").on("click",function(){e.reset()}),n.find(".crop-btn").on("click",function(){$(this).addClass("disabled");const l=a(e,t);l&&(n.find("#upload-progress-bar").css("width","0%"),n.find("#upload-progress-box").show().removeClass("hide"),f({data:t,imageData:l,progressBarEl:n.find("#upload-progress-bar")},function(g,D){if(g)return n.find("#upload-progress-box").hide(),n.find(".upload-btn").removeClass("disabled"),n.find(".crop-btn").removeClass("disabled"),p.error(g);d(D.url),n.modal("hide")}))}),n.find(".upload-btn").on("click",async function(){$(this).addClass("disabled"),e.destroy();const l=(await s.e(60239).then(s.t.bind(s,65643,23))).default;e=new l(r,{viewMode:1,autoCropArea:1,ready:function(){n.find(".crop-btn").trigger("click")}})})}})})};function f(t,d){const n={};n[t.data.paramName]=t.data.paramValue,n.method=t.data.socketMethod,n.size=t.imageData.length,n.progress=0;const c=1e5;function r(){const u=t.imageData.slice(n.progress,n.progress+c);socket.emit("uploads.upload",{chunk:u,params:n},function(e,l){if(e)return p.error(e);if(n.progress+c<n.size)return n.progress+=u.length,t.progressBarEl.css("width",(n.progress/n.size*100).toFixed(2)+"%"),setTimeout(r,100);t.progressBarEl.css("width","100%"),d(null,l)})}r()}function a(t,d){let n;try{n=d.imageType?t.getCroppedCanvas().toDataURL(d.imageType):t.getCroppedCanvas().toDataURL()}catch(c){["The operation is insecure.","Failed to execute 'toDataURL' on 'HTMLCanvasElement': Tainted canvases may not be exported."].indexOf(c.message)!==-1?p.error("[[error:cors-error]]"):p.error(c.message);return}return n}function o(t,d){function n(l,g){l==="error"&&t.uploadModal.find("#fileUploadSubmitBtn").removeClass("disabled"),t.uploadModal.find("#alert-"+l).translateText(g).removeClass("hide")}const c=t.uploadModal.find("#fileInput");if(!c.val())return n("error","[[uploads:select-file-to-upload]]");const r=c[0].files[0],u=t.hasOwnProperty("fileSize")&&t.fileSize!==void 0?parseInt(t.fileSize,10):!1;if(u&&r.size>u*1024)return n("error","[[error:file-too-big, "+u+"]]");if(r.name.endsWith(".gif")){s.e(98463).then(function(){var l=[s(24187)];(function(g){g.ajaxSubmit(t.uploadModal,d)}).apply(null,l)}).catch(s.oe);return}const e=new FileReader;e.addEventListener("load",function(){const l=e.result;t.uploadModal.modal("hide"),i.handleImageCrop({url:l,imageType:r.type,socketMethod:t.socketMethod,aspectRatio:t.aspectRatio,allowSkippingCrop:t.allowSkippingCrop,restrictImageDimension:t.restrictImageDimension,imageDimension:t.imageDimension,paramName:t.paramName,paramValue:t.paramValue},d)},!1),r&&e.readAsDataURL(r)}return i}.apply(b,y),h!==void 0&&(v.exports=h)}}]);
