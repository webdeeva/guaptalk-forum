"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,19992,26174,34271,49897,89034,99127],{10034:(D,x,i)=>{var p,m;p=[i(17459),i(13230),i(49897),i(33530),i(97014),i(7065),i(64061)],m=function(d,y,l,o,f,v){const g={};let w=!1;const E="";g.init=function(){const s=$("#username"),a=$("#password"),n=$("#password-confirm"),u=$("#register");L(),$("#content #noscript").val("false");const h=utils.params();h.token&&$("#token").val(h.token),s.on("keyup",function(){$("#yourUsername").text(this.value.length>0?y(this.value):"username")}),s.on("blur",function(){s.val().length&&c(s.val())}),a.on("blur",function(){a.val().length&&C(a.val(),n.val())}),n.on("blur",function(){n.val().length&&e(a.val(),n.val())});function A(S){w=!1,$('[aria-invalid="true"]').removeAttr("aria-invalid"),C(a.val(),n.val()),e(a.val(),n.val()),c(s.val(),S)}f.capsLockCheck(document.querySelector("#password"),document.querySelector("#caps-lock-warning")),u.on("click",function(S){const T=$(this),k=$("#register-error-notify");k.addClass("hidden"),S.preventDefault(),A(function(){w||(T.addClass("disabled"),T.parents("form").ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},success:function(_){if(T.removeClass("disabled"),!!_)if(_.next){const P=utils.urlToLocation(_.next).pathname,b=utils.params({url:_.next});b.registered=!0;const O=$.param(b);window.location.href=P+"?"+O}else _.message&&d.translate(_.message,function(P){o.alert(P),ajaxify.go("/")})},error:function(_){d.translate(_.responseText,config.defaultLang,function(P){_.status===403&&_.responseText==="Forbidden"?window.location.href=config.relative_path+"/register?error=csrf-invalid":(k.find("p").text(P),k.removeClass("hidden"),T.removeClass("disabled"))})}}))})}),$("#username").trigger("focus")};function c(s,a){a=a||function(){};const n=$("#username-notify");n.text("");const u=$("#username"),h=y(s);s.length<ajaxify.data.minimumUsernameLength||h.length<ajaxify.data.minimumUsernameLength?t(u,n,"[[error:username-too-short]]"):s.length>ajaxify.data.maximumUsernameLength?t(u,n,"[[error:username-too-long]]"):!utils.isUserNameValid(s)||!h?t(u,n,"[[error:invalid-username]]"):Promise.allSettled([l.head(`/users/bySlug/${h}`,{}),l.head(`/groups/${s}`,{})]).then(A=>{A.every(S=>S.status==="rejected")?r(u,n,E):t(u,n,"[[error:username-taken]]"),a()})}function C(s,a){const n=$("#password"),u=$("#password-notify"),h=$("#password-confirm-notify");u.text(""),h.text("");try{if(utils.assertPasswordValidity(s,v),s===$("#username").val())throw new Error("[[user:password-same-as-username]]");r(n,u,E)}catch(A){t(n,u,A.message)}s!==a&&a!==""&&t(n,h,"[[user:change-password-error-match]]")}function e(s,a){const n=$("#password-confirm"),u=$("#password-notify"),h=$("#password-confirm-notify");h.text(""),!(!s||u.hasClass("alert-error"))&&(s!==a?t(n,h,"[[user:change-password-error-match]]"):r(n,h,E))}function t(s,a,n){d.translate(n,function(u){s.attr("aria-invalid","true"),a.html(u),a.parent().removeClass("register-success").addClass("register-danger"),a.show()}),w=!0}function r(s,a,n){d.translate(n,function(u){s.removeAttr("aria-invalid"),a.html(u),a.parent().removeClass("register-danger").addClass("register-success"),a.show()})}function L(){if(!app.user.uid&&config.defaultLang!==config.userLang){const s=$('[component="register/local"]'),a=$('<input type="hidden" name="userLang" value="'+config.userLang+'" />');s.append(a)}}return g}.apply(x,p),m!==void 0&&(D.exports=m)},13230:(D,x,i)=>{var p,m,d;(function(y){m=[i(53050)],p=y,d=typeof p=="function"?p.apply(x,m):p,d!==void 0&&(D.exports=d)})(function(y){const l=y("[^\\p{L}\\s\\d\\-_@.]","g"),o=/[^\w\s\d\-_@.]/g,f=/^\s+|\s+$/g,v=/\s+/g,g=/-+/g,w=/-$/g,E=/^-/g,c=/^[\w\d\s.,\-@]+$/;return function(e,t){return e?(e=String(e).replace(f,""),c.test(e)?e=e.replace(o,"-"):e=y.replace(e,l,"-"),e=t?e:e.toLocaleLowerCase(),e=e.replace(v,"-"),e=e.replace(g,"-"),e=e.replace(w,""),e=e.replace(E,""),e):""}})},49897:(D,x,i)=>{i.r(x),i.d(x,{del:()=>C,get:()=>v,head:()=>g,patch:()=>E,post:()=>w,put:()=>c});var p=i(91749),m=i.n(p),d=i(33530),y=i.n(d);const l=config.relative_path+"/api/v3";async function o(e,t){if(e.url=e.url.startsWith("/api")?config.relative_path+e.url:l+e.url,typeof t=="function"){f(e).then(r=>t(null,r),r=>t(r));return}try{return await f(e)}catch(r){if(r.message==="A valid login session was not found. Please log in and try again."){const{url:L}=await(0,p.fire)("filter:admin.reauth",{url:"login"});return(0,d.confirm)("[[error:api.reauth-required]]",s=>{s&&ajaxify.go(L)})}throw r}}async function f(e){const{url:t}=e;delete e.url,e.data&&!(e.data instanceof FormData)&&(e.data=JSON.stringify(e.data||{}),e.headers["content-type"]="application/json; charset=utf-8"),{options:e}=await(0,p.fire)("filter:api.options",{options:e}),e.data&&(e.body=e.data,delete e.data);const r=await fetch(t,e),{headers:L}=r;if(L.get("x-redirect"))return f({url:L.get("x-redirect"),...e});const s=L.get("content-type"),a=s&&s.startsWith("application/json");let n;if(e.method!=="HEAD"&&(a?n=await r.json():n=await r.text()),!r.ok)throw n?new Error(a?n.status.message:n):new Error(r.statusText);return a&&n&&n.hasOwnProperty("status")&&n.hasOwnProperty("response")?n.response:n}function v(e,t,r){return o({url:e+(t&&Object.keys(t).length?"?"+$.param(t):"")},r)}function g(e,t,r){return o({url:e+(t&&Object.keys(t).length?"?"+$.param(t):""),method:"HEAD"},r)}function w(e,t,r){return o({url:e,method:"POST",data:t,headers:{"x-csrf-token":config.csrf_token}},r)}function E(e,t,r){return o({url:e,method:"PATCH",data:t,headers:{"x-csrf-token":config.csrf_token}},r)}function c(e,t,r){return o({url:e,method:"PUT",data:t,headers:{"x-csrf-token":config.csrf_token}},r)}function C(e,t,r){return o({url:e,method:"DELETE",data:t,headers:{"x-csrf-token":config.csrf_token}},r)}},97014:(D,x,i)=>{var p,m;p=[i(91749),i(17459),i(64061)],m=function(d,y){const l={_capsState:!1};return l.init=function(){const o=$("#login-error-notify"),f=$("#login"),v=$("#login-form");f.on("click",async function(g){g.preventDefault();const w=$("#username").val(),E=$("#password").val();if(o.addClass("hidden").find("p").text(""),!w||!E){o.find("p").translateText("[[error:invalid-username-or-password]]"),o.removeClass("hidden");return}if(!f.hasClass("disabled")){f.addClass("disabled");try{if((await d.fire("filter:app.login",{username:w,password:E,cancel:!1})).cancel){f.removeClass("disabled");return}}catch(c){o.find("p").translateText(c.message),o.removeClass("hidden"),f.removeClass("disabled");return}d.fire("action:app.login"),v.ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},beforeSend:function(){app.flags._login=!0},success:function(c){d.fire("action:app.loggedIn",c);const C=utils.urlToLocation(c.next).pathname,e=utils.params({url:c.next});e.loggedin=!0,delete e.register;const t=$.param(e);window.location.href=C+"?"+t},error:function(c){let C=c.responseText;const e=c.responseJSON;c.status===403&&c.responseText==="Forbidden"?window.location.href=config.relative_path+"/login?error=csrf-invalid":e&&e.hasOwnProperty("banned_until")&&(C=e.banned_until?y.compile("error:user-banned-reason-until",new Date(e.banned_until).toLocaleString(),e.reason):"[[error:user-banned-reason, "+e.reason+"]]"),o.find("p").translateText(C),o.removeClass("hidden"),f.removeClass("disabled"),$("#password:focus").length&&$("#password").select()}})}}),l.capsLockCheck(document.querySelector("#password"),document.querySelector("#caps-lock-warning")),$("#content #username").val()?$("#content #password").val("").focus():$("#content #username").focus(),$("#content #noscript").val("false")},l.capsLockCheck=(o,f)=>{const v=g=>{f.classList[g?"remove":"add"]("hidden"),f.parentNode.classList[g?"add":"remove"]("has-warning")};o&&(o.addEventListener("keyup",function(g){if(l._capsState&&g.key==="CapsLock"){v(!1),l._capsState=!l._capsState;return}l._capsState=g.getModifierState&&g.getModifierState("CapsLock"),v(l._capsState)}),l._capsState&&v(!0))},l}.apply(x,p),m!==void 0&&(D.exports=m)}}]);
