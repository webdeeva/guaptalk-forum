"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[45860,49016],{22410:(C,T,l)=>{var d,e;d=[l(91749),l(29930),l(49897)],e=function(A,g,_){const a={};let r,f=0,i=!1,h,s=0;a.init=function(o,u){const t=$("body");typeof o=="function"?(r=o,h=t):(r=u,h=o||t),f=$(window).scrollTop(),$(window).off("scroll",m).on("scroll",m),t.height()<=$(window).height()&&(!ajaxify.data.hasOwnProperty("pageCount")||ajaxify.data.pageCount>1)&&r(1)};function m(){s&&clearTimeout(s),s=setTimeout(function(){s=0,p()},60)}function p(){const o=utils.findBootstrapEnvironment(),u=(o==="xs"||o==="sm")&&$("html").hasClass("composing");if(i||u||app.flags._glance)return;const t=$(window).scrollTop(),n=$(window).height(),c=h.height()-n,v=h.offset()?h.offset().top:0,E=100*(t-v)/(c<=0?n:c),D=15,P=85,w=t>f?1:-1;(E<D&&t<f||E>P&&t>f||E<0&&w>0&&c<0)&&r(w),f=t}return a.loadMore=function(o,u,t){if(i)return;i=!0;const n={method:o,data:u};A.fire("action:infinitescroll.loadmore",n),(n.method.startsWith("/")?_.get:socket.emit)(n.method,n.data,function(v,E){if(v)return i=!1,g.error(v);t(E,function(){i=!1})})},a.loadMoreXhr=function(o,u){if(i)return;i=!0;const t=config.relative_path+"/api"+location.pathname.replace(new RegExp("^"+config.relative_path),""),n={url:t,data:o};A.fire("action:infinitescroll.loadmore.xhr",n),$.get(t,o,function(c){u(c,function(){i=!1})}).fail(function(c){i=!1,g.error(String(c.responseJSON||"[[error:no-connection]]"))})},a.removeExtra=function(o,u,t){let n=$();if(o.length<=t)return n;const c=o.length-t;if(u>0){const v=$(document).height(),E=$(window).scrollTop();n=o.slice(0,c).remove(),$(window).scrollTop(E+($(document).height()-v))}else n=o.slice(o.length-c).remove();return n},a}.apply(T,d),e!==void 0&&(C.exports=e)},42176:(C,T,l)=>{var d,e;d=[l(67910),l(63984)],e=function(A,g){const _={};return _.init=function(){A.init(),$('[component="post/content"] img:not(.not-responsive)').addClass("img-fluid"),g.handleInfiniteScroll("account/upvoted")},_}.apply(T,d),e!==void 0&&(C.exports=e)},63984:(C,T,l)=>{var d,e;d=[l(67910),l(22410),l(91749)],e=function(A,g,_){const a={};let r,f=1;a.init=function(){A.init(),$('[component="post/content"] img:not(.not-responsive)').addClass("img-fluid"),a.handleInfiniteScroll("account/posts")},a.handleInfiniteScroll=function(s){r=s,f=ajaxify.data.pagination.currentPage,config.usePagination||g.init(i)};function i(s){if(s<0)return;const m=utils.params();f+=1,m.page=f,g.loadMoreXhr(m,function(p,o){p.posts&&p.posts.length?h(p.posts,o):o()})}function h(s,m){app.parseAndTranslate(r,"posts",{posts:s},function(p){$('[component="posts"]').append(p),p.find("img:not(.not-responsive)").addClass("img-fluid"),p.find(".timeago").timeago(),_.fire("action:posts.loaded",{posts:s}),m()})}return a}.apply(T,d),e!==void 0&&(C.exports=e)}}]);
