"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[25285,77597],{31799:(u,m,c)=>{var y,l;y=[c(22410),c(24962),c(96352),c(47682),c(43349),c(65348),c(91749),c(29930),c(49897),c(57576)],l=function(p,h,g,C,f,a,o,s,t,d){const n={};$(window).on("action:ajaxify.start",function(e,r){String(r.url).startsWith("category/")||g.disable()}),n.init=function(){const e=ajaxify.data.cid;app.enterRoom("category_"+e),C.init("category",T),f.handleSort("categoryTopicSort","category/"+ajaxify.data.slug),config.usePagination?g.disable():g.init('[component="category/topic"]',ajaxify.data.topic_count,n.toTop,n.toBottom),x(),A(e),b(),j(),a.init($('[component="category-selector"]'),{privilege:"find",parentCid:ajaxify.data.cid,onSelect:function(r){ajaxify.go("/category/"+r.cid)}}),new d("[data-clipboard-text]"),o.fire("action:topics.loaded",{topics:ajaxify.data.topics}),o.fire("action:category.loaded",{cid:ajaxify.data.cid})};function x(){let e=ajaxify.data.topicIndex;e&&utils.isNumber(e)&&(e=Math.max(0,parseInt(e,10)),e&&window.location.search.indexOf("page=")===-1&&g.scrollToElement($('[component="category/topic"][data-index="'+e+'"]'),!0,0))}function A(e){$('[component="category/watching"], [component="category/tracking"], [component="category/ignoring"], [component="category/notwatching"]').on("click",function(){const i=$(this).attr("data-state");t.put(`/categories/${encodeURIComponent(e)}/watch`,{state:i},S=>{if(S)return s.error(S);$('[component="category/watching/menu"]').toggleClass("hidden",i!=="watching"),$('[component="category/watching/check"]').toggleClass("fa-check",i==="watching"),$('[component="category/tracking/menu"]').toggleClass("hidden",i!=="tracking"),$('[component="category/tracking/check"]').toggleClass("fa-check",i==="tracking"),$('[component="category/notwatching/menu"]').toggleClass("hidden",i!=="notwatching"),$('[component="category/notwatching/check"]').toggleClass("fa-check",i==="notwatching"),$('[component="category/ignoring/menu"]').toggleClass("hidden",i!=="ignoring"),$('[component="category/ignoring/check"]').toggleClass("fa-check",i==="ignoring"),s.success("[[category:"+i+".message]]")})})}function b(){$('[component="category/load-more-subcategories"]').on("click",async function(){const e=$(this),{categories:r}=await t.get(`/categories/${ajaxify.data.cid}/children?start=${ajaxify.data.nextSubCategoryStart}`);if(e.toggleClass("hidden",!r.length||r.length<ajaxify.data.subCategoriesPerPage),!!r.length)return app.parseAndTranslate("category","children",{children:r},function(i){i.find(".timeago").timeago(),$('[component="category/subcategory/container"]').append(i),ajaxify.data.nextSubCategoryStart+=ajaxify.data.subCategoriesPerPage,ajaxify.data.subCategoriesLeft-=r.length,e.toggleClass("hidden",ajaxify.data.subCategoriesLeft<=0).translateText("[[category:x-more-categories, "+ajaxify.data.subCategoriesLeft+"]]")}),!1})}function j(){const e=document.querySelector(".description.clamp-fade-4");e&&e.addEventListener("click",()=>{const r=e.classList.contains("line-clamp-4");e.classList.toggle("line-clamp-4",!r)})}n.toTop=function(){g.scrollTop(0)},n.toBottom=async()=>{const{count:e}=await t.get(`/categories/${encodeURIComponent(ajaxify.data.category.cid)}/count`);g.scrollBottom(e-1)};function T(e,r,i){i=i||function(){},o.fire("action:topics.loading");const S=utils.params();p.loadMore(`/categories/${encodeURIComponent(ajaxify.data.cid)}/topics`,{after:e,direction:r,query:S,categoryTopicSort:S.sort||config.categoryTopicSort},function(E,w){o.fire("action:topics.loaded",{topics:E.topics}),i(E,w)})}return n}.apply(m,y),l!==void 0&&(u.exports=l)},43349:(u,m,c)=>{var y,l;y=[c(52473)],l=function(p){const h={};return h.handleSort=function(g,C){const f=p.get("thread/sort");f.find("i").removeClass("fa-check");const a=utils.params().sort||config[g];f.find('a[data-sort="'+a+'"]').find("i").addClass("fa-check"),$("body").off("click",'[component="thread/sort"] a[data-sort]').on("click",'[component="thread/sort"] a[data-sort]',function(){const s=$(this).attr("data-sort"),t=utils.params();t.sort=s;const d=$.param(t);ajaxify.go(C+(d?"?"+d:""))})},h}.apply(m,y),l!==void 0&&(u.exports=l)},65348:(u,m,c)=>{var y,l;y=[c(96349),c(33530),c(91749),c(17459)],l=function(p,h,g,C){const f={};return f.init=function(a,o){if(!a||!a.length)return;o=o||{};const s=o.onSelect||function(){};o.states=o.states||["watching","tracking","notwatching","ignoring"],o.template=o.template||"partials/category/selector-dropdown-left",g.fire("action:category.selector.options",{el:a,options:o}),p.init(a,o);const t={el:a,selectedCategory:null};a.on("click","[data-cid]",function(){const n=$(this);return n.hasClass("disabled")?!1:(t.selectCategory(n.attr("data-cid")),s(t.selectedCategory))});let d=t.el.find('[component="category-selector-selected"]').html();return C.translate(d,n=>{d=n}),t.selectCategory=function(n){const x=t.el.find('[data-cid="'+n+'"]');t.selectedCategory={cid:n,name:x.attr("data-name")},x.length?t.el.find('[component="category-selector-selected"]').html(x.find('[component="category-markup"]').html()):t.el.find('[component="category-selector-selected"]').html(d)},t.getSelectedCategory=function(){return t.selectedCategory},t.getSelectedCid=function(){return t.selectedCategory?t.selectedCategory.cid:0},o.hasOwnProperty("selectedCategory")&&app.parseAndTranslate(o.template,{selectedCategory:o.selectedCategory},function(n){t.el.find('[component="category-selector-selected"]').html(n.find('[component="category-selector-selected"]').html())}),t},f.modal=function(a){a=a||{},a.onSelect=a.onSelect||function(){},a.onSubmit=a.onSubmit||function(){},app.parseAndTranslate("admin/partials/categories/select-category",{message:a.message},function(o){const s=h.dialog({title:a.title||"[[modules:composer.select-category]]",message:o,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:d}}}),t=f.init(s.find('[component="category-selector"]'),a);function d(n){return n.preventDefault(),t.selectedCategory&&(a.onSubmit(t.selectedCategory),s.modal("hide")),!1}a.openOnLoad&&s.on("shown.bs.modal",function(){s.find(".dropdown-toggle").dropdown("toggle")}),s.find("form").on("submit",d)})},f}.apply(m,y),l!==void 0&&(u.exports=l)}}]);
