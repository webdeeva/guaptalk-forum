"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[34229],{60089:(f,h,a)=>{var d,r;d=[a(67910),a(49897),a(91749),a(29930)],r=function(k,b,p,u){const s={};s.init=function(){k.init();const n=$('[component="blocks/search/list"]'),t=n.find('[component="blocks/start-typing"]'),i=n.find('[component="blocks/no-users"]');$("#user-search").on("keyup",utils.debounce(function(){const o=this.value;if(!o){n.find('[component="blocks/search/match"]').remove(),t.removeClass("hidden"),i.addClass("hidden");return}t.addClass("hidden"),b.get("/api/users",{query:o,searchBy:"username",paginate:!1},function(c,e){if(c)return u.error(c);if(!e.users.length){n.find('[component="blocks/search/match"]').remove(),i.removeClass("hidden");return}i.addClass("hidden"),e.matchCount>10&&(e.users.length=10),app.parseAndTranslate("account/blocks","edit",{edit:e.users},function(g){n.find('[component="blocks/search/match"]').remove(),g.insertAfter(i)})})},200)),$(".block-edit").on("click",'[data-action="block"], [data-action="unblock"]',async function(){const o=parseInt(this.getAttribute("data-uid"),10),c=$(this).attr("data-action"),e=$(this);await l(o,c),e.addClass("hidden").siblings("[data-action]").removeClass("hidden"),s.refreshList()}),$("#users-container").on("click",'[data-action="unblock"]',async function(){await l($(this).attr("data-uid"),$(this).attr("data-action")),s.refreshList()})};async function l(n,t){return socket.emit("user.toggleBlock",{blockeeUid:n,blockerUid:ajaxify.data.uid,action:t}).catch(u.error)}return s.refreshList=function(){$.get(config.relative_path+"/api/"+ajaxify.currentPage).done(function(n){app.parseAndTranslate("account/blocks","users",n,function(t){t.find(".timeago").timeago(),$("#users-container").html(t),$("#users-container").siblings("div.alert")[t.length?"hide":"show"]()}),p.fire("action:user.blocks.toggle",{data:n})}).fail(function(){ajaxify.go(ajaxify.currentPage)})},s}.apply(h,d),r!==void 0&&(f.exports=r)}}]);
