"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[11848,19308,42032,48118,48815,65274,66173,87353,95004],{474:(h,g,A)=>{var u;u=function(){return{types:["number"],get:function(d,E,m){const i=d.val();return m?i?+i:0:i?+i:void 0}}}.call(g,A,g,h),u!==void 0&&(h.exports=u)},17708:(h,g,A)=>{var u;u=function(){let d=null,E=null,m=null;const i=Object.freeze({0:"",8:"Backspace",9:"Tab",13:"Enter",27:"Escape",32:"Space",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Delete",187:"=",189:"-",190:".",191:"/",219:"[",220:"\\",221:"]"});function o(){this.c=!1,this.a=!1,this.s=!1,this.m=!1,this.code=0,this.char=""}function n(t){const e=t.ctrlKey!==E.c||t.altKey!==E.a||t.shiftKey!==E.s||t.metaKey!==E.m,r=t.ctrlKey+t.altKey+t.shiftKey+t.metaKey-E.c-E.a-E.s-E.m,s=new o;if(s.c=t.ctrlKey,s.a=t.altKey,s.s=t.shiftKey,s.m=t.metaKey,E=s,e){if(r<0)return null;s.code=m.code,s.char=m.char}else s.code=t.which,s.char=c(s.code);return m=s,s}function c(t){return t=+t,t===0?"":t>=48&&t<=90?String.fromCharCode(t).toUpperCase():t>=112&&t<=123?"F"+(t-111):i[t]||"#"+t}function l(t,e,r,s){let p="";if(!(t instanceof o))return p;if(!t.char)return e?"Enter a key":"";(!s||/CtrlAShifMea#/.test(s))&&(s=e?" + ":"+"),t.c&&(p+=(r?"C":"Ctrl")+s),t.a&&(p+=(r?"A":"Alt")+s),t.s&&(p+=(r?"S":"Shift")+s),t.m&&(p+=(r?"M":"Meta")+s);let _;return e?_=t.char:t.code&&(_="#"+t.code||0),p+_}function y(t){if(t instanceof o)return t;const e=new o,r=/([^CtrlAShifMea#\d]+)(?:#|\d)/.exec(t),s=r!=null?t.split(r[1]):[t];for(let p=0;p<s.length;p+=1){const _=s[p];switch(_){case"C":case"Ctrl":e.c=!0;break;case"A":case"Alt":e.a=!0;break;case"S":case"Shift":e.s=!0;break;case"M":case"Meta":e.m=!0;break;default:{const S=/\d+/.exec(_);S!=null&&(e.code=S[0]),e.char=c(e.code)}}}return e}const f={types:["key"],use:function(){d=this.helper},init:function(t){return t.focus(function(){m=t.data("keyData")||new o,E=new o}).keydown(function(e){e.preventDefault(),a(t,e)}).keyup(function(e){a(t,e)}),t},set:function(t,e){const r=y(e||"");t.data("keyData",r),r.code?t.removeClass("alert-danger"):t.addClass("alert-danger"),t.val(l(r,!0,!1," + "))},get:function(t,e,r){const s=t.data("keyData"),p=t.data("split")||t.data("separator")||"+",_=!d.isFalse(t.data("short"));if(e){if(r||s!=null&&s.char)return l(s,!1,_,p)}else if(r||s!=null&&s.code)return s}};function a(t,e){e=e||window.event,e.which=e.which||e.keyCode||e.key;const r=n(e);r!=null&&f.set(t,r)}return f}.call(g,A,g,h),u!==void 0&&(h.exports=u)},40054:(h,g,A)=>{var u;u=function(){let d=null;function E(n){const c=$(d.createElement("button",{class:"btn btn-sm btn-primary remove",title:"Remove Item"},"-"));return c.click(function(l){l.preventDefault(),n.remove(),c.remove(),n.each(function(y,f){f=$(f),f.is("[data-key]")&&d.destructElement(f)})}),c}function m(n,c,l,y,f,a){l=d.deepClone(l);const t=l["data-type"]||l.type||"text",e=$(d.createElementOfType(t,l.tagName,l));e.attr("data-parent","_"+c),delete l["data-type"],delete l.tagName;for(const[r,s]of Object.entries(l))r.search("data-")===0?e.data(r.substring(5),s):r.search("prop-")===0?e.prop(r.substring(5),s):e.attr(r,s);d.fillField(e,y),$('[data-parent="_'+c+'"]',n).length&&a(f),a(e),a(E(e.add(f)))}function i(n,c,l,y){const f=$(document.createTextNode(" ")),a=n.data("new")||"",t=$(d.createElement("button",{class:"btn btn-sm btn-primary add",title:"Expand Array"},"+"));t.click(function(e){e.preventDefault(),m(n,c,l,a,y.clone(),function(r){f.before(r)})}),n.append(f),n.append(t)}return{types:["array","div"],use:function(){d=this.helper},create:function(n,c){return d.createElement(c||"div")},set:function(n,c){let l=n.data("attributes");const y=n.data("key")||n.data("parent");let f=n.data("split")||", ";f=function(){try{return $(f)}catch(a){return console.error(a),$(document.createTextNode(f))}}(),typeof l!="object"&&(l={}),n.empty(),c instanceof Array||(c=[]);for(let a=0;a<c.length;a+=1)m(n,y,l,c[a],f.clone(),function(t){n.append(t)});i(n,y,l,f)},get:function(n,c,l){const y=n.data("key")||n.data("parent"),f=$('[data-parent="_'+y+'"]',n),a=[];if(f.each(function(t,e){e=$(e);const r=d.readValue(e);if(d.isTrue(e.data("empty"))||r!==void 0&&(r==null||r.length!==0))return a.push(r)}),l||a.length)return a}}}.call(g,A,g,h),u!==void 0&&(h.exports=u)},46700:(h,g,A)=>{var u;u=function(){let d=null;function E(i,o,n,c,l,y,f){const a=n["data-prepend"],t=n["data-append"];delete n["data-prepend"],delete n["data-append"],n=d.deepClone(n);const e=n["data-type"]||n.type||"text",r=$(d.createElementOfType(e,n.tagName,n));r.attr("data-parent","_"+o),r.attr("data-prop",c),delete n["data-type"],delete n.tagName;for(const[s,p]of Object.entries(n))s.search("data-")===0?r.data(s.substring(5),p):s.search("prop-")===0?r.prop(s.substring(5),p):r.attr(s,p);d.fillField(r,l),$('[data-parent="_'+o+'"]',i).length&&f(y),a&&f(a),f(r),t&&f(t)}return{types:["object"],use:function(){d=this.helper},create:function(i,o){return d.createElement(o||"div")},set:function(i,o){const n=i.data("attributes")||i.data("properties"),c=i.data("key")||i.data("parent");let l=i.data("split")||", ";if(l=function(){try{return $(l)}catch(y){return console.error(y),$(document.createTextNode(l))}}(),i.empty(),typeof o!="object"&&(o={}),Array.isArray(n))for(const[y,f]of Object.entries(n)){let a=f;typeof f!="object"&&(a={});const t=a["data-prop"]||a["data-property"]||y;o[t]===void 0&&a["data-new"]!==void 0&&(o[t]=a["data-new"]),E(i,c,a,t,o[t],l.clone(),function(e){i.append(e)})}},get:function(i,o,n){const c=i.data("key")||i.data("parent"),l=$('[data-parent="_'+c+'"]',i),y={};if(l.each(function(f,a){a=$(a);const t=d.readValue(a),e=a.data("prop");if(d.isTrue(a.data("empty"))||t!==void 0&&(t==null||t.length!==0))return y[e]=t,t}),n||Object.keys(y).length)return y}}}.call(g,A,g,h),u!==void 0&&(h.exports=u)},50397:(h,g,A)=>{var u;u=function(){let d=null;return{types:["textarea"],use:function(){d=this},create:function(){return d.helper.createElement("textarea")},set:function(m,i,o){o&&i!=null&&typeof i.trim=="function"&&(i=i.trim()),m.val(i||"")},get:function(m,i,o){let n=m.val();if(i&&(n==null?n=void 0:n=n.trim()),o||n)return n}}}.call(g,A,g,h),u!==void 0&&(h.exports=u)},59175:(h,g,A)=>{var u,d;u=[A(81335),A(33530),A(91749),A(65285)],d=function(E,m,i){let o;const n={types:["sorted-list"],use:function(){o=this},set:function(a,t){const e=a.attr("data-sorted-list");t[e]=[],a.find('[data-type="item"]').each(function(r,s){const p=$(s).attr("data-sorted-list-uuid"),_=o.helper.serializeForm($('[data-sorted-list-object="'+e+'"][data-sorted-list-uuid="'+p+'"]'));f(_),t[e].push(_)})},get:async(a,t)=>{const{listEl:e,key:r,formTpl:s,formValues:p}=await i.fire("filter:settings.sorted-list.load",{listEl:a.find('[data-type="list"]'),key:a.attr("data-sorted-list"),formTpl:a.attr("data-form-template"),formValues:{}}),_=await E.render(s,p);$('[data-sorted-list="'+r+'"] [data-type="add"]').on("click",function(){const C=m.confirm(_,function(K){K&&n.addItem(C.find("form").children(),a)});i.fire("action:settings.sorted-list.modal",{modal:C})});const T=a.parents("form").attr("data-socket-get"),k=ajaxify.data[T?t:"settings"][r];if(Array.isArray(k)&&typeof k[0]!="string"){const C=await Promise.all(k.map(async K=>{({item:K}=await i.fire("filter:settings.sorted-list.loadItem",{item:K}));const w=utils.generateUUID(),D=$(_).deserialize(K);return D.attr("data-sorted-list-uuid",w),D.attr("data-sorted-list-object",r),$("#content").append(D.hide()),{itemUUID:w,item:K}}));for(const{itemUUID:K,item:w}of C){const D=await y(a,K,w);i.fire("action:settings.sorted-list.itemLoaded",{element:D})}i.fire("action:settings.sorted-list.loaded",{containerEl:a.get(0),listEl:e.get(0),hash:t,key:r})}e.sortable().addClass("pointer")},addItem:async(a,t)=>{const e=t.attr("data-sorted-list"),r=utils.generateUUID(),s=$('<form class="" data-sorted-list-uuid="'+r+'" data-sorted-list-object="'+e+'"></form>');s.append(a),$("#content").append(s.hide());let p=o.helper.serializeForm(s);({item:p}=await i.fire("filter:settings.sorted-list.loadItem",{item:p})),y(t,r,p)}};function c(a,t){a.find('[data-sorted-list-uuid="'+t+'"] [data-type="remove"]').on("click",function(){$('[data-sorted-list-uuid="'+t+'"]').remove()})}function l(a,t){const e=a.find('[data-type="list"]'),r=a.attr("data-sorted-list");$('[data-sorted-list-uuid="'+t+'"] [data-type="edit"]').on("click",function(){const p=$('[data-sorted-list-uuid="'+t+'"][data-sorted-list-object="'+r+'"]'),_=p.clone(!0).show();_.find("select").each((T,k)=>{k.value=p.find(`select#${k.id}`).val()});const S=m.confirm(_,async T=>{if(T){const k=$('<form class="" data-sorted-list-uuid="'+t+'" data-sorted-list-object="'+r+'"></form>');k.append(S.find("form").children()),$("#content").find('[data-sorted-list-uuid="'+t+'"][data-sorted-list-object="'+r+'"]').remove(),$("#content").append(k.hide());let C=o.helper.serializeForm(k);({item:C}=await i.fire("filter:settings.sorted-list.loadItem",{item:C})),f(C);const K=e.find('[data-sorted-list-uuid="'+t+'"]');y(a,t,C,K)}});i.fire("action:settings.sorted-list.modal",{modal:S})})}function y(a,t,e,r){const s=a.find('[data-type="list"]'),p=a.attr("data-item-template");return f(e),new Promise(_=>{app.parseAndTranslate(p,e,function(S){S=$(S),r?r.replaceWith(S):s.append(S),S.attr("data-sorted-list-uuid",t),c(a,t),l(a,t),i.fire("action:settings.sorted-list.parse",{itemHtml:S}),_(S.get(0))})})}function f(a){return Object.entries(a||{}).forEach(([t,e])=>{a[t]=typeof e=="string"?utils.stripHTMLTags(e,utils.stripTags):e})}return n}.apply(g,u),d!==void 0&&(h.exports=d)},71575:(h,g,A)=>{var u;u=function(){let d=null;function E(i,o){for(let n=0;n<o.length;n+=1){const c=o[n],l=c.text||c.value;delete c.text,i.append($(d.helper.createElement("option",c)).text(l))}}return{types:["select"],use:function(){d=this},create:function(i,o,n){const c=$(d.helper.createElement("select"));return E(c,n["data-options"]),delete n["data-options"],c},init:function(i){const o=i.data("options");o!=null&&E(i,o)},set:function(i,o){i.val(o||"")},get:function(i,o,n){const c=i.val();if(n||c)return c}}}.call(g,A,g,h),u!==void 0&&(h.exports=u)},75210:(h,g,A)=>{var u;u=function(){let d=null;return{types:["checkbox"],use:function(){d=this},create:function(){return d.helper.createElement("input",{type:"checkbox"})},set:function(m,i){m.prop("checked",i)},get:function(m,i,o){const n=m.prop("checked");if(n!=null)return o?i?n?1:0:n:n||void 0}}}.call(g,A,g,h),u!==void 0&&(h.exports=u)}}]);
