"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[36422,38395],{16227:(b,P,d)=>{var f,l;f=[d(52473)],l=function(i){const t={};let p;t.pids=[];let r=!1;t.init=function(o,e){t.pids.length=0,p=o,e=e||{},r=e.allowMainPostSelect||!1,$("#content").on("click",'[component="topic"] [component="post"]',n),a()};function n(o){o.stopPropagation();const e=$(this).attr("data-pid"),c=$('[component="topic"] [data-pid="'+e+'"]');!r&&parseInt($(this).attr("data-index"),10)===0||t.togglePostSelection(c,e)}t.disable=function(){t.pids.forEach(function(o){i.get("post","pid",o).toggleClass("selected",!1)}),$("#content").off("click",'[component="topic"] [component="post"]',n),_()},t.togglePostSelection=function(o,e){if(e){const c=t.pids.indexOf(e);c===-1?(t.pids.push(e),o.toggleClass("selected",!0)):(t.pids.splice(c,1),o.toggleClass("selected",!1)),t.pids.length&&t.pids.sort(function(k,u){return k-u}),typeof p=="function"&&p()}};function s(){return!1}function a(){$("#content").on("click",'[component="post"] button, [component="post"] a',s)}function _(){$("#content").off("click",'[component="post"] button, [component="post"] a',s)}return t}.apply(P,f),l!==void 0&&(b.exports=l)},36422:(b,P,d)=>{var f,l;f=[d(16227),d(29930),d(49897)],l=function(i,t,p){const r={};let n,s,a,_;r.init=function(){_=ajaxify.data.tid,$(window).off("action:ajaxify.end",o).on("action:ajaxify.end",o),!n&&app.parseAndTranslate("modals/delete-posts",{},function(g){n=g,$("body").append(n),s=n.find("#delete_posts_confirm"),a=n.find("#purge_posts_confirm"),n.find("#delete_posts_cancel").on("click",u),i.init(function(){k(),c()},{allowMainPostSelect:!0}),c(),s.on("click",function(){e(s,m=>`/posts/${encodeURIComponent(m)}/state`)}),a.on("click",function(){e(a,m=>`/posts/${encodeURIComponent(m)}`)})})};function o(){(ajaxify.data.template.name!=="topic"||ajaxify.data.tid!==_)&&(u(),$(window).off("action:ajaxify.end",o))}function e(g,m){g.attr("disabled",!0),Promise.all(i.pids.map(A=>p.del(m(A),{}))).then(u).catch(t.error).finally(()=>{g.removeAttr("disabled")})}function c(){i.pids.length?n.find("#pids").translateHtml("[[topic:fork-pid-count, "+i.pids.length+"]]"):n.find("#pids").translateHtml("[[topic:fork-no-pids]]")}function k(){i.pids.length?(s.removeAttr("disabled"),a.removeAttr("disabled")):(s.attr("disabled",!0),a.attr("disabled",!0))}function u(){n&&(n.remove(),n=null,i.disable())}return r}.apply(P,f),l!==void 0&&(b.exports=l)}}]);
