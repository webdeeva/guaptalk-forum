"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[17205,34405,38395],{16227:(b,P,f)=>{var p,r;p=[f(52473)],r=function(u){const c={};let h;c.pids=[];let E=!1;c.init=function(e,t){c.pids.length=0,h=e,t=t||{},E=t.allowMainPostSelect||!1,$("#content").on("click",'[component="topic"] [component="post"]',a),m()};function a(e){e.stopPropagation();const t=$(this).attr("data-pid"),i=$('[component="topic"] [data-pid="'+t+'"]');!E&&parseInt($(this).attr("data-index"),10)===0||c.togglePostSelection(i,t)}c.disable=function(){c.pids.forEach(function(e){u.get("post","pid",e).toggleClass("selected",!1)}),$("#content").off("click",'[component="topic"] [component="post"]',a),y()},c.togglePostSelection=function(e,t){if(t){const i=c.pids.indexOf(t);i===-1?(c.pids.push(t),e.toggleClass("selected",!0)):(c.pids.splice(i,1),e.toggleClass("selected",!1)),c.pids.length&&c.pids.sort(function(o,n){return o-n}),typeof h=="function"&&h()}};function l(){return!1}function m(){$("#content").on("click",'[component="post"] button, [component="post"] a',l)}function y(){$("#content").off("click",'[component="post"] button, [component="post"] a',l)}return c}.apply(P,p),r!==void 0&&(b.exports=r)},17205:(b,P,f)=>{var p,r;p=[f(16227),f(34405),f(29930)],r=function(u,c,h){const E={};let a,l,m=0;E.init=function(n){a||app.parseAndTranslate("modals/change-owner",{},function(s){a=s,l=a.find("#change_owner_commit"),$("body").append(a),a.find("#change_owner_cancel").on("click",o),a.find("#username").on("keyup",e),u.init(t,{allowMainPostSelect:!0}),y(),n&&u.togglePostSelection(n,n.attr("data-pid")),l.on("click",function(){i()}),c.user(a.find("#username"),{filters:["notbanned"]},function(A,g){m=g.item.user.uid,e()})})};function y(){u.pids.length?a.find("#pids").translateHtml("[[topic:fork-pid-count, "+u.pids.length+"]]"):a.find("#pids").translateHtml("[[topic:fork-no-pids]]")}function e(){m&&a.find("#username").length&&a.find("#username").val().length&&u.pids.length?l.removeAttr("disabled"):l.attr("disabled",!0)}function t(){e(),y()}function i(){m&&socket.emit("posts.changeOwner",{pids:u.pids,toUid:m},function(n){if(n)return h.error(n);ajaxify.go(`/post/${u.pids[0]}`),o()})}function o(){a&&(a.remove(),a=null,u.disable())}return E}.apply(P,p),r!==void 0&&(b.exports=r)},34405:(b,P,f)=>{var p,r;p=[f(49897),f(29930),f(36e3),f(9787),f(35786)],r=function(u,c,{Textcomplete:h},{TextareaEditor:E},{ContenteditableEditor:a}){const l={},m={delay:200,appendTo:null};l.init=e=>{const t={...m,...e},{input:i,onSelect:o}=t;app.loadJQueryUI(function(){i.autocomplete({...t,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(n,s){y(i,o,n,s)}})})},l.user=function(e,t,i){typeof t=="function"&&(i=t,t={}),t=t||{},l.init({input:e,onSelect:i,source:(o,n)=>{t.query=o.term,u.get("/api/users",t,function(s,A){if(s)return c.error(s);if(A&&A.users){const g=A.users.map(function(d){const C=$("<div></div>").html(d.username).text();return d&&{label:C,value:C,user:{uid:d.uid,name:d.username,slug:d.userslug,username:d.username,userslug:d.userslug,displayname:d.displayname,picture:d.picture,banned:d.banned,"icon:text":d["icon:text"],"icon:bgColor":d["icon:bgColor"]}}});n(g)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},l.group=function(e,t){l.init({input:e,onSelect:t,source:(i,o)=>{socket.emit("groups.search",{query:i.term},function(n,s){if(n)return c.error(n);if(s&&s.length){const A=s.map(function(g){return g&&{label:g.name,value:g.name,group:g}});o(A)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},l.tag=function(e,t){l.init({input:e,onSelect:t,delay:100,source:(i,o)=>{socket.emit("topics.autocompleteTags",{query:i.term,cid:ajaxify.data.cid||0},function(n,s){if(n)return c.error(n);s&&o(s),$(".ui-autocomplete a").attr("data-ajaxify","false")})}})};function y(e,t,i,o){t=t||function(){};const n=jQuery.Event("keypress");n.which=13,n.keyCode=13,setTimeout(function(){e.trigger(n)},100),t(i,o)}return l.setup=function({element:e,strategies:t,options:i}){const o=e.get(0);if(o){var n;if(o.nodeName==="TEXTAREA"||o.nodeName==="INPUT"?n=new E(o):o.nodeName==="DIV"&&o.getAttribute("contenteditable")==="true"&&(n=new a(o)),!n)throw new Error("unknown target element type");o.setAttribute("dir",document.querySelector("html").getAttribute("data-dir"));var s=new h(n,t,{dropdown:i});return s.on("rendered",function(){s.dropdown.items.length&&s.dropdown.items[0].activate()}),s}},l}.apply(P,p),r!==void 0&&(b.exports=r)}}]);
