(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,12922,15794,25432,26174,34271,36159,46379,49897,52185,62441,74566,88189,92332,98463,99127],{12236:(I,E,o)=>{"use strict";var g,b;g=[o(49897),o(29930)],b=function(m,S){const c={};c.init=function(t,i){const r=t.find(".draft-icon"),n=t.attr("data-uuid");function a(){$(`[component="composer"][data-uuid="${n}"]`).length&&(i.save_id||(i.save_id=utils.generateSaveId(app.user.uid)),c.addToDraftList("available",i.save_id),c.addToDraftList("open",i.save_id),u(t,r,i))}t.on("keyup","textarea, input.handle, input.title",utils.debounce(a,1e3)),t.on("click",'input[type="checkbox"]',utils.debounce(a,1e3)),t.on("click",'[component="category/list"] [data-cid]',utils.debounce(a,1e3)),t.on("itemAdded",".tags",utils.debounce(a,1e3)),t.on("thumb.uploaded",a),r.on("animationend",function(){$(this).toggleClass("active",!1)}),$(window).on("unload",function(){const l=c.getList("open");l.length&&l.forEach(v=>c.removeFromDraftList("open",v))}),c.migrateGuest(),c.migrateThumbs(...arguments)};function x(t){return parseInt(t,10)>0?localStorage:sessionStorage}c.get=function(t){if(!t)return null;const i=t.split(":")[1],r=x(i);try{const n=r.getItem(t),a=JSON.parse(n)||null;if(!a)throw new Error(`can't parse draft json for ${t}`);return a.save_id=t,a.timestamp&&(a.timestampISO=utils.toISOString(a.timestamp)),$(window).trigger("action:composer.drafts.get",{save_id:t,draft:a,storage:r}),a}catch{return console.warn(`[composer/drafts] Could not get draft ${t}, removing`),c.removeFromDraftList("available"),c.removeFromDraftList("open"),null}};function u(t,i,r){if(f(app.user.uid?"localStorage":"sessionStorage")&&r&&r.save_id&&t.length){const n=t.find("input.title"),a=n&&n.length&&n.val(),l=t.find("textarea").val(),v=x(app.user.uid);if(l.length||a&&a.length){const h={save_id:r.save_id,action:r.action,text:l,uuid:t.attr("data-uuid"),timestamp:Date.now()};if(r.action==="topics.post"){const D=t.find("input.tags").val();h.tags=D,h.title=a,h.cid=r.cid}else r.action==="posts.reply"?(h.title=r.title,h.tid=r.tid,h.toPid=r.toPid):r.action==="posts.edit"&&(h.pid=r.pid,h.title=a||r.title);app.user.uid||(h.handle=t.find("input.handle").val()),v.setItem(r.save_id,JSON.stringify(h)),$(window).trigger("action:composer.drafts.save",{storage:v,postData:r,postContainer:t}),i.toggleClass("active",!0)}else c.removeDraft(r.save_id)}}c.removeDraft=function(t){if(!t)return;c.removeFromDraftList("available",t),c.removeFromDraftList("open",t);const i=t.split(":")[1],r=x(i);r.removeItem(t),$(window).trigger("action:composer.drafts.remove",{storage:r,save_id:t})},c.getList=function(t){try{const i=localStorage.getItem(`drafts:${t}`);return JSON.parse(i)||[]}catch{return console.warn("[composer/drafts] Could not read list of available drafts"),[]}},c.addToDraftList=function(t,i){if(!f(app.user.uid?"localStorage":"sessionStorage")||!i)return;const r=c.getList(t);r.includes(i)||(r.push(i),localStorage.setItem("drafts:"+t,JSON.stringify(r)))},c.removeFromDraftList=function(t,i){if(!f(app.user.uid?"localStorage":"sessionStorage")||!i)return;const r=c.getList(t);r.includes(i)&&(r.splice(r.indexOf(i),1),localStorage.setItem("drafts:"+t,JSON.stringify(r)))},c.migrateGuest=function(){if(f("localStorage")&&app.user.uid){const t=/^composer:\d+:\d$/,i=Object.keys(sessionStorage).filter(function(a){return t.test(a)}),r=new Set([]),n=i.map(function(a){const l=a.split(":");return l[1]=app.user.uid,r.add(l.join(":")),l.join(":")});return i.forEach(function(a,l){localStorage.setItem(n[l],sessionStorage.getItem(a)),sessionStorage.removeItem(a)}),r.forEach(function(a){c.addToDraftList("available",a)}),r}},c.migrateThumbs=function(t,i){if(!app.uid)return;const r=t.attr("data-uuid"),n=c.get(i.save_id);n&&n.uuid&&m.put(`/topics/${n.uuid}/thumbs`,{tid:r}).then(()=>{Promise.all([o.e(20056),o.e(23662),o.e(65285),o.e(40559),o.e(449),o.e(5785),o.e(36159)]).then(function(){var a=[o(71431)];(function(l){l.updateThumbCount(r,t)}).apply(null,a)}).catch(o.oe)})},c.listAvailable=function(){return c.getList("available").map(c.get).filter(Boolean)},c.getAvailableCount=function(){return c.listAvailable().length},c.open=function(t){if(!t)return;const i=c.get(t);d(t,i)},c.loadOpen=function(){if(ajaxify.data.template.login||ajaxify.data.template.register||config.hasOwnProperty("openDraftsOnPageLoad")&&!config.openDraftsOnPageLoad)return;const t=c.getList("available"),i=c.getList("open");t.length&&t.forEach(function(r){if(!r||i.includes(r))return;const n=c.get(r);if(!n||!n.text&&!n.title){c.removeFromDraftList("available",r),c.removeFromDraftList("open",r);return}d(r,n)})};function d(t,i){const n=t.split(":")[1];parseInt(app.user.uid,10)===parseInt(n,10)&&Promise.all([o.e(20056),o.e(23662),o.e(65285),o.e(40559),o.e(449),o.e(5785),o.e(36159)]).then(function(){var a=[o(71431)];(function(l){i.action==="topics.post"?l.newTopic({save_id:i.save_id,cid:i.cid,handle:app.user&&app.user.uid?void 0:utils.escapeHTML(i.handle),title:utils.escapeHTML(i.title),body:i.text,tags:String(i.tags||"").split(",")}):i.action==="posts.reply"?m.get("/topics/"+i.tid,{},function(v,h){if(v)return S.error(v);l.newReply({save_id:i.save_id,tid:i.tid,toPid:i.toPid,title:h.title,body:i.text})}):i.action==="posts.edit"&&l.editPost({save_id:i.save_id,pid:i.pid,title:i.title?utils.escapeHTML(i.title):void 0,body:i.text})}).apply(null,a)}).catch(o.oe)}function f(t){var i;try{i=window[t];var r="__storage_test__";return i.setItem(r,r),i.removeItem(r),!0}catch(n){return n instanceof DOMException&&(n.code===22||n.code===1014||n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED")&&i&&i.length!==0}}return c}.apply(E,g),b!==void 0&&(I.exports=b)},13230:(I,E,o)=>{"use strict";var g,b,m;(function(S){b=[o(53050)],g=S,m=typeof g=="function"?g.apply(E,b):g,m!==void 0&&(I.exports=m)})(function(S){const c=S("[^\\p{L}\\s\\d\\-_@.]","g"),A=/[^\w\s\d\-_@.]/g,x=/^\s+|\s+$/g,u=/\s+/g,d=/-+/g,f=/-$/g,t=/^-/g,i=/^[\w\d\s.,\-@]+$/;return function(n,a){return n?(n=String(n).replace(x,""),i.test(n)?n=n.replace(A,"-"):n=S.replace(n,c,"-"),n=a?n:n.toLocaleLowerCase(),n=n.replace(u,"-"),n=n.replace(d,"-"),n=n.replace(f,""),n=n.replace(t,""),n):""}})},24187:(I,E,o)=>{"use strict";var g,b;g=[o(64061)],b=function(){const m={};m.show=function(u,d){const f=u.hasOwnProperty("fileSize")&&u.fileSize!==void 0?parseInt(u.fileSize,10):!1;app.parseAndTranslate("modals/upload-file",{showHelp:u.hasOwnProperty("showHelp")&&u.showHelp!==void 0?u.showHelp:!0,fileSize:f,title:u.title||"[[global:upload-file]]",description:u.description||"",button:u.button||"[[global:upload]]",accept:u.accept?u.accept.replace(/,/g,"&#44; "):""},function(t){t.modal("show"),t.on("hidden.bs.modal",function(){t.remove()});const i=t.find("#uploadForm");i.attr("action",u.route),i.find("#params").val(JSON.stringify(u.params)),t.find("#fileUploadSubmitBtn").on("click",function(){$(this).addClass("disabled"),i.submit()}),i.submit(function(){return S(t,f,d),!1})})},m.hideAlerts=function(u){$(u).find("#alert-status, #alert-success, #alert-error, #upload-progress-box").addClass("hide")};function S(u,d,f){c(u,"status","[[uploads:uploading-file]]"),u.find("#upload-progress-bar").css("width","0%"),u.find("#upload-progress-box").show().removeClass("hide");const t=u.find("#fileInput");if(!t.val())return c(u,"error","[[uploads:select-file-to-upload]]");if(!x(t[0],d))return c(u,"error","[[error:file-too-big, "+d+"]]");m.ajaxSubmit(u,f)}function c(u,d,f){m.hideAlerts(u),d==="error"&&u.find("#fileUploadSubmitBtn").removeClass("disabled"),f=f.replace(/&amp;#44/g,"&#44"),u.find("#alert-"+d).translateText(f).removeClass("hide")}m.ajaxSubmit=function(u,d){u.find("#uploadForm").ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},error:function(t){t=A(t),c(u,"error",t.responseJSON?.status?.message||t.responseJSON?.error||`[[error:upload-error-fallback, ${t.status} ${t.statusText}]]`)},uploadProgress:function(t,i,r,n){u.find("#upload-progress-bar").css("width",n+"%")},success:function(t){let i=A(t);t.hasOwnProperty("response")&&t.hasOwnProperty("status")&&t.status.code==="ok"&&(i=t.response.images),d(i[0].url),c(u,"success","[[uploads:upload-success]]"),setTimeout(function(){m.hideAlerts(u),u.modal("hide")},750)}})};function A(u){if(typeof u=="string")try{return JSON.parse(u)}catch(d){return console.error(d),{error:"[[error:parse-error]]"}}return u}function x(u,d){return window.FileReader&&d?u.files[0].size<=d*1e3:!0}return m}.apply(E,g),b!==void 0&&(I.exports=b)},29869:I=>{"use strict";I.exports=function(E,o,g){o.setGlobal("true",!0),o.setGlobal("false",!1);const b=24*60*60*1e3,m={displayMenuItem:c,buildMetaTag:A,buildLinkTag:x,stringify:u,escape:d,stripTags:f,buildCategoryIcon:t,buildCategoryLabel:i,generateCategoryBackground:r,generateChildrenCategories:n,generateTopicClass:a,membershipBtn:l,spawnPrivilegeStates:v,localeToHTML:h,renderTopicImage:D,renderDigestAvatar:P,userAgentIcons:W,buildAvatar:O,increment:M,generateWroteReplied:K,generateRepliedTo:F,generateWrote:U,encodeURIComponent:H,isoTimeToLocaleString:J,shouldHideReplyContainer:k,humanReadableNumber:z,formattedNumber:Y,txEscape:G,generatePlaceholderWave:j,register:Q,__escape:S};function S(e){return e}function c(e,s){const p=e.navigation[s];return!(!p||p.route.match("/users")&&e.user&&!e.user.privileges["view:users"]||p.route.match("/tags")&&e.user&&!e.user.privileges["view:tags"]||p.route.match("/groups")&&e.user&&!e.user.privileges["view:groups"])}function A(e){const s=e.name?'name="'+e.name+'" ':"",p=e.property?'property="'+e.property+'" ':"",w=e.content?'content="'+e.content.replace(/\n/g," ")+'" ':"";return"<meta "+s+p+w+`/>
	`}function x(e){const s=["link","rel","as","type","href","sizes","title","crossorigin"],[p,w,R,y,L,N,T,B]=s.map(C=>e[C]?`${C}="${e[C]}" `:"");return"<link "+p+w+R+y+N+T+L+B+`/>
	`}function u(e){return JSON.stringify(e).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/g,"&quot;")}function d(e){return E.escapeHTML(e)}function f(e){return E.stripHTMLTags(e)}function t(e,s,p){return e?`<span class="icon d-inline-flex justify-content-center align-items-center align-middle ${p}" style="${r(e)} width:${s}; height: ${s}; font-size: ${parseInt(s,10)/2}px;">${e.icon?`<i class="fa fa-fw ${e.icon}"></i>`:""}</span>`:""}function i(e,s="a",p=""){if(!e)return"";const w=s==="a"?`href="${g}/category/${e.slug}"`:"";return`<${s} ${w} class="badge px-1 text-truncate text-decoration-none ${p}" style="color: ${e.color};background-color: ${e.bgColor};border-color: ${e.bgColor}!important; max-width: 70vw;">
			${e.icon&&e.icon!=="fa-nbb-none"?`<i class="fa fa-fw ${e.icon}"></i>`:""}
			${e.name}
		</${s}>`}function r(e){if(!e)return"";const s=[];return e.bgColor&&(s.push("background-color: "+e.bgColor),s.push(`border-color: ${e.bgColor}!important`)),e.color&&s.push("color: "+e.color),e.backgroundImage&&(s.push("background-image: url("+e.backgroundImage+")"),e.imageClass&&s.push("background-size: "+e.imageClass)),s.join("; ")+";"}function n(e){let s="";return!e||!e.children||!e.children.length||(e.children.forEach(function(p){if(p&&!p.isSection){const w=p.link?p.link:g+"/category/"+p.slug;s+='<span class="category-children-item float-start"><div role="presentation" class="icon float-start" style="'+r(p)+'"><i class="fa fa-fw '+p.icon+'"></i></div><a href="'+w+'"><small>'+p.name+"</small></a></span>"}}),s=s&&'<span class="category-children">'+s+"</span>"),s}function a(e){return["locked","pinned","deleted","unread","scheduled"].filter(p=>!!e[p]).join(" ")}function l(e,s=""){return e.isMember&&e.name!=="administrators"?`<button class="btn btn-danger ${s}" data-action="leave" data-group="${e.displayName}" ${e.disableLeave?" disabled":""}><i class="fa fa-times"></i> [[groups:membership.leave-group]]</button>`:e.isPending&&e.name!=="administrators"?`<button class="btn btn-warning disabled ${s}"><i class="fa fa-clock-o"></i> [[groups:membership.invitation-pending]]</button>`:e.isInvited?`<button class="btn btn-warning" data-action="rejectInvite" data-group="${e.displayName}">[[groups:membership.reject]]</button><button class="btn btn-success" data-action="acceptInvite" data-group="${e.name}"><i class="fa fa-plus"></i> [[groups:membership.accept-invitation]]</button>`:!e.disableJoinRequests&&e.name!=="administrators"?`<button class="btn btn-success ${s}" data-action="join" data-group="${e.displayName}"><i class="fa fa-plus"></i> [[groups:membership.join-group]]</button>`:""}function v(e,s,p,w){const R=[];for(const[y,L]of Object.entries(p))R.push({name:y,state:L,type:w[y]});return R.map(function(y){const L=["groups:moderate","groups:posts:upvote","groups:posts:downvote","groups:local:login","groups:group:create"],N=["groups:find","groups:read","groups:topics:read","groups:view:users","groups:view:tags","groups:view:groups"],T=["groups:moderate"];let B=["groups:view:users","groups:find","groups:read","groups:topics:read","groups:topics:create","groups:topics:reply","groups:topics:tag","groups:posts:edit","groups:posts:history","groups:posts:delete","groups:posts:upvote","groups:posts:downvote","groups:topics:delete"];e===-1&&(B=B.slice(3));const C=s==="guests"&&(L.includes(y.name)||y.name.startsWith("groups:admin:"))||s==="spiders"&&!N.includes(y.name)||s==="fediverse"&&!B.includes(y.name)||s==="Global Moderators"&&T.includes(y.name);return`
				<td data-privilege="${y.name}" data-value="${y.state}" data-type="${y.type}">
					<div class="form-check text-center">
						<input class="form-check-input float-none${C?' d-none"':""}" autocomplete="off" type="checkbox"${y.state?" checked":""}${C?' disabled="disabled" aria-diabled="true"':""} />
					</div>
				</td>
			`}).join("")}function h(e,s){return e=e||s||"en-GB",e.replace("_","-")}function D(e){return e.thumb?'<img src="'+e.thumb+'" class="img-circle user-img" title="'+e.user.displayname+'" />':'<img component="user/picture" data-uid="'+e.user.uid+'" src="'+e.user.picture+'" class="user-img" title="'+e.user.displayname+'" />'}function P(e){return e.teaser?e.teaser.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.teaser.user.picture+'" title="'+e.teaser.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.teaser.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.teaser.user["icon:text"]+"</div>":e.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.user.picture+'" title="'+e.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.user["icon:text"]+"</div>"}function W(e){let s="";switch(e.platform){case"Linux":s+='<i class="fa fa-fw fa-linux"></i>';break;case"Microsoft Windows":s+='<i class="fa fa-fw fa-windows"></i>';break;case"Apple Mac":s+='<i class="fa fa-fw fa-apple"></i>';break;case"Android":s+='<i class="fa fa-fw fa-android"></i>';break;case"iPad":s+='<i class="fa fa-fw fa-tablet"></i>';break;case"iPod":case"iPhone":s+='<i class="fa fa-fw fa-mobile"></i>';break;default:s+='<i class="fa fa-fw fa-question-circle"></i>';break}switch(e.browser){case"Chrome":s+='<i class="fa fa-fw fa-chrome"></i>';break;case"Firefox":s+='<i class="fa fa-fw fa-firefox"></i>';break;case"Safari":s+='<i class="fa fa-fw fa-safari"></i>';break;case"IE":s+='<i class="fa fa-fw fa-internet-explorer"></i>';break;case"Edge":s+='<i class="fa fa-fw fa-edge"></i>';break;default:s+='<i class="fa fa-fw fa-question-circle"></i>';break}return s}function O(e,s,p,w,R){e||(e=this),w=w||"";const y=new Map([["title",e.displayname],["data-uid",e.uid],["class",`avatar ${w}${p?" avatar-rounded":""}`]]),L=[`--avatar-size: ${s};`],N=B=>Array.from(B).reduce((C,[V,Z])=>(C+=` ${V}="${Z}"`,C),"");let T="";return e.picture&&(T+=`<img${N(y)} alt="${e.displayname}" loading="lazy" component="${R||"avatar/picture"}" src="${e.picture}" style="${L.join(" ")}" onError="this.remove()" itemprop="image" />`),T+=`<span${N(y)} component="${R||"avatar/icon"}" style="${L.join(" ")} background-color: ${e["icon:bgColor"]}">${e["icon:text"]}</span>`,T}function M(e,s){return String(e+parseInt(s,10))}function K(e,s){return e.toPid?F(e,s):U(e,s)}function F(e,s){const p=e.parent&&e.parent.displayname?e.parent.displayname:"[[global:guest]]";return`[[topic:replied-to-user-${e.timestamp<Date.now()-s*b?"on":"ago"}, ${e.toPid}, ${g}/post/${encodeURIComponent(e.toPid)}, ${p}, ${g}/post/${encodeURIComponent(e.pid)}, ${e.timestampISO}]]`}function U(e,s){return`[[topic:wrote-${e.timestamp<Date.now()-s*b?"on":"ago"}, ${g}/post/${encodeURIComponent(e.pid)}, ${e.timestampISO}]]`}function H(e){return encodeURIComponent(e)}function J(e,s="en-GB"){return new Date(e).toLocaleString([s],{dateStyle:"short",timeStyle:"short"}).replace(/,/g,"&#44;")}function k(e){return!!(e.replies.count<=0||e.replies.hasSingleImmediateReply)}function z(e,s=1){return E.makeNumberHumanReadable(e,s)}function Y(e){return E.addCommas(e)}function G(e){return String(e).replace(/%/g,"&#37;").replace(/,/g,"&#44;")}function j(e){return e.map(p=>p==="divider"?'<li class="dropdown-divider"></li>':`
			<li class="dropdown-item placeholder-wave">
				<div class="placeholder" style="width: 20px;"></div>
				<div class="placeholder col-${p}"></div>
			</li>`).join("")}function Q(){Object.keys(m).forEach(function(e){o.registerHelper(e,m[e])})}return m}},30076:(I,E,o)=>{"use strict";var g,b;const m=o(29869);g=[o(77918),o(81335)],b=function(S,c){return m(S,c,config.relative_path)}.apply(E,g),b!==void 0&&(I.exports=b)},36159:(I,E,o)=>{"use strict";var g,b;g=[o(49897),o(33530),o(29930),o(24187),o(81335),o(17459),o(65285)],b=function(m,S,c,A,x,u){const d={};return d.get=f=>m.get(`/topics/${f}/thumbs`,{thumbsOnly:1}),d.getByPid=f=>m.get(`/posts/${encodeURIComponent(f)}`,{}).then(t=>d.get(t.tid)),d.delete=(f,t)=>m.del(`/topics/${f}/thumbs`,{path:t}),d.deleteAll=f=>{d.get(f).then(t=>{Promise.all(t.map(i=>d.delete(f,i.url)))})},d.upload=f=>new Promise(t=>{A.show({title:"[[topic:composer.thumb-title]]",method:"put",route:config.relative_path+`/api/v3/topics/${f}/thumbs`},function(i){t(i)})}),d.modal={},d.modal.open=function(f){const{id:t,pid:i}=f;let{modal:r}=f,n;return new Promise(a=>{Promise.all([d.get(t),i?d.getByPid(i):[]]).then(l=>new Promise(v=>{const h=l.reduce((D,P)=>D.concat(P));n=h.length,v(h)})).then(l=>x.render("modals/topic-thumbs",{thumbs:l})).then(l=>{r?u.translate(l,function(v){r.find(".bootbox-body").html(v),d.modal.handleSort({modal:r,numThumbs:n})}):(r=S.dialog({title:"[[modules:thumbs.modal.title]]",message:l,onEscape:!0,backdrop:!0,buttons:{add:{label:'<i class="fa fa-plus"></i> [[modules:thumbs.modal.add]]',className:"btn-success",callback:()=>(d.upload(t).then(()=>{d.modal.open({...f,modal:r}),Promise.all([o.e(20056),o.e(40559),o.e(449),o.e(5785),o.e(52185)]).then(function(){var v=[o(71431)];(h=>{h.updateThumbCount(t,$(`[component="composer"][data-uuid="${t}"]`)),a()}).apply(null,v)}).catch(o.oe)}),!1)},close:{label:"[[global:close]]",className:"btn-primary"}}}),d.modal.handleDelete({...f,modal:r}),d.modal.handleSort({modal:r,numThumbs:n}))})})},d.modal.handleDelete=f=>{const t=f.modal.get(0),{id:i}=f;t.addEventListener("click",r=>{r.target.closest('button[data-action="remove"]')&&S.confirm("[[modules:thumbs.modal.confirm-remove]]",n=>{if(!n)return;const a=r.target.closest("[data-id]").getAttribute("data-id"),l=r.target.closest("[data-path]").getAttribute("data-path");m.del(`/topics/${a}/thumbs`,{path:l}).then(()=>{d.modal.open(f),Promise.all([o.e(20056),o.e(40559),o.e(449),o.e(5785),o.e(52185)]).then(function(){var v=[o(71431)];(h=>{h.updateThumbCount(i,$(`[component="composer"][data-uuid="${i}"]`))}).apply(null,v)}).catch(o.oe)}).catch(c.error)})})},d.modal.handleSort=({modal:f,numThumbs:t})=>{if(t>1){const i=f.find(".topic-thumbs-modal");i.sortable({items:"[data-id]"}),i.on("sortupdate",d.modal.handleSortChange)}},d.modal.handleSortChange=(f,t)=>{const i=t.item.get(0).parentNode.querySelectorAll("[data-id]");Array.from(i).forEach((r,n)=>{const a=r.getAttribute("data-id");let l=r.getAttribute("data-path");l=l.replace(new RegExp(`^${config.upload_url}`),""),m.put(`/topics/${a}/thumbs/order`,{path:l,order:n}).catch(c.error)})},d}.apply(E,g),b!==void 0&&(I.exports=b)},49897:(I,E,o)=>{"use strict";o.r(E),o.d(E,{del:()=>r,get:()=>u,head:()=>d,patch:()=>t,post:()=>f,put:()=>i});var g=o(91749),b=o.n(g),m=o(33530),S=o.n(m);const c=config.relative_path+"/api/v3";async function A(n,a){if(n.url=n.url.startsWith("/api")?config.relative_path+n.url:c+n.url,typeof a=="function"){x(n).then(l=>a(null,l),l=>a(l));return}try{return await x(n)}catch(l){if(l.message==="A valid login session was not found. Please log in and try again."){const{url:v}=await(0,g.fire)("filter:admin.reauth",{url:"login"});return(0,m.confirm)("[[error:api.reauth-required]]",h=>{h&&ajaxify.go(v)})}throw l}}async function x(n){const{url:a}=n;delete n.url,n.data&&!(n.data instanceof FormData)&&(n.data=JSON.stringify(n.data||{}),n.headers["content-type"]="application/json; charset=utf-8"),{options:n}=await(0,g.fire)("filter:api.options",{options:n}),n.data&&(n.body=n.data,delete n.data);const l=await fetch(a,n),{headers:v}=l;if(v.get("x-redirect"))return x({url:v.get("x-redirect"),...n});const h=v.get("content-type"),D=h&&h.startsWith("application/json");let P;if(n.method!=="HEAD"&&(D?P=await l.json():P=await l.text()),!l.ok)throw P?new Error(D?P.status.message:P):new Error(l.statusText);return D&&P&&P.hasOwnProperty("status")&&P.hasOwnProperty("response")?P.response:P}function u(n,a,l){return A({url:n+(a&&Object.keys(a).length?"?"+$.param(a):"")},l)}function d(n,a,l){return A({url:n+(a&&Object.keys(a).length?"?"+$.param(a):""),method:"HEAD"},l)}function f(n,a,l){return A({url:n,method:"POST",data:a,headers:{"x-csrf-token":config.csrf_token}},l)}function t(n,a,l){return A({url:n,method:"PATCH",data:a,headers:{"x-csrf-token":config.csrf_token}},l)}function i(n,a,l){return A({url:n,method:"PUT",data:a,headers:{"x-csrf-token":config.csrf_token}},l)}function r(n,a,l){return A({url:n,method:"DELETE",data:a,headers:{"x-csrf-token":config.csrf_token}},l)}},74566:(I,E,o)=>{I.exports=o(12236)}}]);
