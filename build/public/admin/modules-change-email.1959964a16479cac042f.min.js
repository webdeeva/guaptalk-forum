"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,34271,49897,53020,99127],{49897:(y,c,n)=>{n.r(c),n.d(c,{del:()=>A,get:()=>d,head:()=>h,patch:()=>P,post:()=>D,put:()=>O});var u=n(91749),o=n.n(u),f=n(33530),b=n.n(f);const g=config.relative_path+"/api/v3";async function s(e,a){if(e.url=e.url.startsWith("/api")?config.relative_path+e.url:g+e.url,typeof a=="function"){l(e).then(t=>a(null,t),t=>a(t));return}try{return await l(e)}catch(t){if(t.message==="A valid login session was not found. Please log in and try again."){const{url:i}=await(0,u.fire)("filter:admin.reauth",{url:"login"});return(0,f.confirm)("[[error:api.reauth-required]]",m=>{m&&ajaxify.go(i)})}throw t}}async function l(e){const{url:a}=e;delete e.url,e.data&&!(e.data instanceof FormData)&&(e.data=JSON.stringify(e.data||{}),e.headers["content-type"]="application/json; charset=utf-8"),{options:e}=await(0,u.fire)("filter:api.options",{options:e}),e.data&&(e.body=e.data,delete e.data);const t=await fetch(a,e),{headers:i}=t;if(i.get("x-redirect"))return l({url:i.get("x-redirect"),...e});const m=i.get("content-type"),E=m&&m.startsWith("application/json");let r;if(e.method!=="HEAD"&&(E?r=await t.json():r=await t.text()),!t.ok)throw r?new Error(E?r.status.message:r):new Error(t.statusText);return E&&r&&r.hasOwnProperty("status")&&r.hasOwnProperty("response")?r.response:r}function d(e,a,t){return s({url:e+(a&&Object.keys(a).length?"?"+$.param(a):"")},t)}function h(e,a,t){return s({url:e+(a&&Object.keys(a).length?"?"+$.param(a):""),method:"HEAD"},t)}function D(e,a,t){return s({url:e,method:"POST",data:a,headers:{"x-csrf-token":config.csrf_token}},t)}function P(e,a,t){return s({url:e,method:"PATCH",data:a,headers:{"x-csrf-token":config.csrf_token}},t)}function O(e,a,t){return s({url:e,method:"PUT",data:a,headers:{"x-csrf-token":config.csrf_token}},t)}function A(e,a,t){return s({url:e,method:"DELETE",data:a,headers:{"x-csrf-token":config.csrf_token}},t)}},86296:(y,c,n)=>{var u,o;u=[n(49897),n(33530),n(29930)],o=function(f,b,g){const s={};return s.init=function(l){const d=b.dialog({message:`
				<label class="form-label">[[admin/manage/users:new-email]]</label>
				<input id="newEmail" class="form-control" type="text" value="${utils.escapeHTML(l.email||"")}">
			`,title:"[[admin/manage/users:change-email]]",onEscape:!0,buttons:{cancel:{label:"[[admin/manage/users:alerts.button-cancel]]",className:"btn-link"},change:{label:"[[admin/manage/users:alerts.button-change]]",className:"btn-primary",callback:function(){const h=d.find("#newEmail").val();return f.post("/users/"+l.uid+"/emails",{skipConfirmation:!0,email:h}).then(()=>{d.modal("hide"),l.onSuccess(h)}).catch(g.error),!1}}}})},s}.apply(c,u),o!==void 0&&(y.exports=o)}}]);
