"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[159,1091,26174,34271,49897,99127],{13230:(A,p,o)=>{var s,h,f;(function(l){h=[o(53050)],s=l,f=typeof s=="function"?s.apply(p,h):s,f!==void 0&&(A.exports=f)})(function(l){const m=l("[^\\p{L}\\s\\d\\-_@.]","g"),c=/[^\w\s\d\-_@.]/g,g=/^\s+|\s+$/g,E=/\s+/g,_=/-+/g,y=/-$/g,n=/^-/g,r=/^[\w\d\s.,\-@]+$/;return function(e,t){return e?(e=String(e).replace(g,""),r.test(e)?e=e.replace(c,"-"):e=l.replace(e,m,"-"),e=t?e:e.toLocaleLowerCase(),e=e.replace(E,"-"),e=e.replace(_,"-"),e=e.replace(y,""),e=e.replace(n,""),e):""}})},26231:(A,p,o)=>{var s,h;s=[o(13230),o(49897),o(33530),o(29930)],h=function(f,l,m,c){const g={};g.init=function(){E(),_(),$(".groups-list").on("click","[data-action]",function(){const n=$(this),r=n.attr("data-action"),u=n.parents("tr[data-groupname]").attr("data-groupname");switch(r){case"delete":m.confirm("[[admin/manage/groups:alerts.confirm-delete]]",function(e){e&&l.del(`/groups/${f(u)}`,{}).then(ajaxify.refresh).catch(c.error)});break}})};function E(){$("#create").on("click",function(){app.parseAndTranslate("admin/partials/create_group_modal",{}).then(n=>{n.modal("show"),n.on("shown.bs.modal",function(){const r=$("#create-modal"),u=$("#create-group-name"),e=$("#create-modal-go"),t=$("#create-modal-error");u.trigger("focus"),r.on("keypress",function(a){a.key==="Enter"&&e.trigger("click")}),n.on("hidden.bs.modal",function(){n.modal("hide"),r.remove()}),e.on("click",function(){const a={name:u.val(),description:$("#create-group-desc").val(),private:$("#create-group-private").is(":checked")?1:0,hidden:$("#create-group-hidden").is(":checked")?1:0};l.post("/groups",a).then(i=>{t.addClass("hide"),u.val(""),r.on("hidden.bs.modal",function(){ajaxify.go("admin/manage/groups/"+i.name)}),r.modal("hide")}).catch(i=>{utils.hasLanguageKey(i.status.message)||(i.status.message="[[admin/manage/groups:alerts.create-failure]]"),t.translateHtml(i.status.message).removeClass("hide")})})})})})}function _(){const n=$("#group-search");function r(){if(!n.val())return ajaxify.refresh();$(".pagination").addClass("hide"),l.get("/api/groups",{query:n.val(),sort:"date",hideEphemeralGroups:!0,excludeGroups:["registered-users","verified-users","unverified-users"]}).then(y).catch(c.error)}n.on("keyup",utils.debounce(r,200))}function y(n){const r=$(".groups-list");app.parseAndTranslate("admin/manage/groups","groups",{groups:n.groups,categories:ajaxify.data.categories},function(u){r.find("[data-groupname]").remove(),r.find("tbody").append(u)})}return g}.apply(p,s),h!==void 0&&(A.exports=h)},49897:(A,p,o)=>{o.r(p),o.d(p,{del:()=>u,get:()=>E,head:()=>_,patch:()=>n,post:()=>y,put:()=>r});var s=o(91749),h=o.n(s),f=o(33530),l=o.n(f);const m=config.relative_path+"/api/v3";async function c(e,t){if(e.url=e.url.startsWith("/api")?config.relative_path+e.url:m+e.url,typeof t=="function"){g(e).then(a=>t(null,a),a=>t(a));return}try{return await g(e)}catch(a){if(a.message==="A valid login session was not found. Please log in and try again."){const{url:i}=await(0,s.fire)("filter:admin.reauth",{url:"login"});return(0,f.confirm)("[[error:api.reauth-required]]",D=>{D&&ajaxify.go(i)})}throw a}}async function g(e){const{url:t}=e;delete e.url,e.data&&!(e.data instanceof FormData)&&(e.data=JSON.stringify(e.data||{}),e.headers["content-type"]="application/json; charset=utf-8"),{options:e}=await(0,s.fire)("filter:api.options",{options:e}),e.data&&(e.body=e.data,delete e.data);const a=await fetch(t,e),{headers:i}=a;if(i.get("x-redirect"))return g({url:i.get("x-redirect"),...e});const D=i.get("content-type"),v=D&&D.startsWith("application/json");let d;if(e.method!=="HEAD"&&(v?d=await a.json():d=await a.text()),!a.ok)throw d?new Error(v?d.status.message:d):new Error(a.statusText);return v&&d&&d.hasOwnProperty("status")&&d.hasOwnProperty("response")?d.response:d}function E(e,t,a){return c({url:e+(t&&Object.keys(t).length?"?"+$.param(t):"")},a)}function _(e,t,a){return c({url:e+(t&&Object.keys(t).length?"?"+$.param(t):""),method:"HEAD"},a)}function y(e,t,a){return c({url:e,method:"POST",data:t,headers:{"x-csrf-token":config.csrf_token}},a)}function n(e,t,a){return c({url:e,method:"PATCH",data:t,headers:{"x-csrf-token":config.csrf_token}},a)}function r(e,t,a){return c({url:e,method:"PUT",data:t,headers:{"x-csrf-token":config.csrf_token}},a)}function u(e,t,a){return c({url:e,method:"DELETE",data:t,headers:{"x-csrf-token":config.csrf_token}},a)}}}]);
