(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[5785,33085,34405,61861,69749,87212,92717,97650],{10870:(h,E,c)=>{"use strict";var y,m;y=[c(33530),c(17459),c(68636),c(29930),c(91749)],m=function(p,u,a,l,f){const t={};let s,d;t.show=function(){f.one("action:ajaxify.end",()=>{o(),e(),t.showEmailConfirmWarning()})},t.showEmailConfirmWarning=function(n){if(!config.emailPrompt||!app.user.uid||parseInt(a.getItem("email-confirm-dismiss"),10)===1)return;const i={alert_id:"email_confirm",type:"warning",timeout:0,closefn:()=>{a.setItem("email-confirm-dismiss",1)}};!app.user.email&&!app.user.isEmailConfirmSent?(i.message="[[error:no-email-to-confirm]]",i.clickfn=function(){l.remove("email_confirm"),ajaxify.go("user/"+app.user.userslug+"/edit/email")},l.alert(i)):!app.user["email:confirmed"]&&!app.user.isEmailConfirmSent?(i.message=n||"[[error:email-not-confirmed]]",i.clickfn=function(){l.remove("email_confirm"),ajaxify.go("/me/edit/email")},l.alert(i)):!app.user["email:confirmed"]&&app.user.isEmailConfirmSent&&(i.message="[[error:email-not-confirmed-email-sent]]",l.alert(i))};function e(){!config.cookies.enabled||!navigator.cookieEnabled||app.inAdmin||a.getItem("cookieconsent")==="1"||(config.cookies.message=u.unescape(config.cookies.message),config.cookies.dismiss=u.unescape(config.cookies.dismiss),config.cookies.link=u.unescape(config.cookies.link),config.cookies.link_url=u.unescape(config.cookies.link_url),app.parseAndTranslate("partials/cookie-consent",config.cookies,function(n){$(document.body).append(n),$(document.body).addClass("cookie-consent-open");const i=$(".cookie-consent");i.find("button").on("click",function(){a.setItem("cookieconsent","1"),i.remove(),$(document.body).removeClass("cookie-consent-open")})}))}function o(){const n=utils.params({full:!0});s=n.has("loggedin"),d=n.get("register"),s&&(l.alert({type:"success",title:"[[global:welcome-back]] "+app.user.username+"!",message:"[[global:you-have-successfully-logged-in]]",timeout:5e3}),n.delete("loggedin")),d&&(p.alert({message:utils.escapeHTML(decodeURIComponent(d))}),n.delete("register")),n.has("lang")&&n.get("lang")===config.defaultLang&&(console.info(`The "lang" parameter was passed in to set the language to "${n.get("lang")}", but that is already the forum default language.`),n.delete("lang"));const i=n.toString();ajaxify.updateHistory(ajaxify.currentPage+(i?`?${i}`:"")+document.location.hash,!0)}return t.showInvalidSession=function(){p.alert({title:"[[error:invalid-session]]",message:"[[error:invalid-session-text]]",closeButton:!1,callback:function(){window.location.reload()}})},t.showSessionMismatch=function(){p.alert({title:"[[error:session-mismatch]]",message:"[[error:session-mismatch-text]]",closeButton:!1,callback:function(){window.location.reload()}})},t}.apply(E,y),m!==void 0&&(h.exports=m)},13342:(h,E,c)=>{h.exports=c(41644)},31494:(h,E,c)=>{h.exports=c(36244)},34405:(h,E,c)=>{"use strict";var y,m;y=[c(49897),c(29930),c(36e3),c(9787),c(35786)],m=function(p,u,{Textcomplete:a},{TextareaEditor:l},{ContenteditableEditor:f}){const t={},s={delay:200,appendTo:null};t.init=e=>{const o={...s,...e},{input:n,onSelect:i}=o;app.loadJQueryUI(function(){n.autocomplete({...o,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(r,g){d(n,i,r,g)}})})},t.user=function(e,o,n){typeof o=="function"&&(n=o,o={}),o=o||{},t.init({input:e,onSelect:n,source:(i,r)=>{o.query=i.term,p.get("/api/users",o,function(g,C){if(g)return u.error(g);if(C&&C.users){const v=C.users.map(function(w){const k=$("<div></div>").html(w.username).text();return w&&{label:k,value:k,user:{uid:w.uid,name:w.username,slug:w.userslug,username:w.username,userslug:w.userslug,displayname:w.displayname,picture:w.picture,banned:w.banned,"icon:text":w["icon:text"],"icon:bgColor":w["icon:bgColor"]}}});r(v)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},t.group=function(e,o){t.init({input:e,onSelect:o,source:(n,i)=>{socket.emit("groups.search",{query:n.term},function(r,g){if(r)return u.error(r);if(g&&g.length){const C=g.map(function(v){return v&&{label:v.name,value:v.name,group:v}});i(C)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},t.tag=function(e,o){t.init({input:e,onSelect:o,delay:100,source:(n,i)=>{socket.emit("topics.autocompleteTags",{query:n.term,cid:ajaxify.data.cid||0},function(r,g){if(r)return u.error(r);g&&i(g),$(".ui-autocomplete a").attr("data-ajaxify","false")})}})};function d(e,o,n,i){o=o||function(){};const r=jQuery.Event("keypress");r.which=13,r.keyCode=13,setTimeout(function(){e.trigger(r)},100),o(n,i)}return t.setup=function({element:e,strategies:o,options:n}){const i=e.get(0);if(i){var r;if(i.nodeName==="TEXTAREA"||i.nodeName==="INPUT"?r=new l(i):i.nodeName==="DIV"&&i.getAttribute("contenteditable")==="true"&&(r=new f(i)),!r)throw new Error("unknown target element type");i.setAttribute("dir",document.querySelector("html").getAttribute("data-dir"));var g=new a(r,o,{dropdown:n});return g.on("rendered",function(){g.dropdown.items.length&&g.dropdown.items[0].activate()}),g}},t}.apply(E,y),m!==void 0&&(h.exports=m)},41088:(h,E,c)=>{"use strict";var y;y=function(){const m={};return m.apply=function(p){$(p).on("mousewheel",function(u){const a=this.scrollTop,l=this.scrollHeight,f=Math.round(this.getBoundingClientRect().height);if(u.originalEvent.deltaY<0&&a===0||u.originalEvent.deltaY>0&&f+a>=l)return!1})},m}.call(E,c,E,h),y!==void 0&&(h.exports=y)},43103:(h,E,c)=>{"use strict";var y,m;y=[c(29930)],m=function(p){const u={};return u.init=function(a){const l=a.uploadFormEl;if(l.length&&(l.attr("action",config.relative_path+a.route),a.dragDropAreaEl&&u.handleDragDrop({container:a.dragDropAreaEl,callback:function(f){u.ajaxSubmit({uploadForm:l,upload:f,callback:a.callback})}}),a.pasteEl&&u.handlePaste({container:a.pasteEl,callback:function(f){u.ajaxSubmit({uploadForm:l,upload:f,callback:a.callback})}}),a.uploadBtnEl)){const f=l.find('input[name="files[]"]');a.uploadBtnEl.on("click",function(){return f.trigger("click"),!1}),f.on("change",function(t){const s=(t.target||{}).files||($(this).val()?[{name:$(this).val(),type:utils.fileMimeType($(this).val())}]:null);s&&u.ajaxSubmit({uploadForm:l,upload:{files:s,fileNames:Array.from(s).map(d=>d.name)},callback:a.callback})})}},u.handleDragDrop=function(a){let l=!1;const f=a.container,t=a.container.find(".imagedrop");f.on("dragenter",function(){l||(t.css("top","0px"),t.css("height",f.height()+"px"),t.css("line-height",f.height()+"px"),t.show(),t.on("dragleave",function(){t.hide(),t.off("dragleave")}))}),t.on("drop",function(e){e.preventDefault();const o=e.originalEvent.dataTransfer.files;if(o.length){let i;if(window.FormData){i=new FormData;for(var n=0;n<o.length;++n)i.append("files[]",o[n],o[n].name)}a.callback({files:o,formData:i})}return t.hide(),!1});function s(d){return d.preventDefault(),!1}$(document).off("dragstart").on("dragstart",function(){l=!0}).off("dragend").on("dragend, mouseup",function(){l=!1}),t.on("dragover",s),t.on("dragenter",s)},u.handlePaste=function(a){a.container.on("paste",function(f){const t=(f.clipboardData||f.originalEvent.clipboardData||{}).items,s=[],d=[];let e=null;window.FormData&&(e=new FormData),[].forEach.call(t,function(o){const n=o.getAsFile();if(n){const i=utils.generateUUID()+"-"+n.name;e&&e.append("files[]",n,i),s.push(n),d.push(i)}}),s.length&&a.callback({files:s,fileNames:d,formData:e})})},u.ajaxSubmit=function(a){const l=[...a.upload.files];for(let t=0;t<l.length;++t){const s=l[t].type.match(/image./);if(s&&!app.user.privileges["upload:post:image"]||!s&&!app.user.privileges["upload:post:file"])return p.error("[[error:no-privileges]]");if(!app.user.isAdmin&&l[t].size>parseInt(config.maximumFileSize,10)*1024)return a.uploadForm[0].reset(),p.error("[[error:file-too-big, "+config.maximumFileSize+"]]")}const f=Date.now();a.uploadForm.off("submit").on("submit",function(){return $(this).ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},resetForm:!0,clearForm:!0,formData:a.upload.formData,error:function(t){let s=t.responseJSON&&(t.responseJSON.error||t.responseJSON.status&&t.responseJSON.status.message)||"[[error:parse-error]]";t&&t.status===413&&(s=t.statusText||"Request Entity Too Large"),p.error(s),p.remove(f)},uploadProgress:function(t,s,d,e){p.alert({alert_id:f,message:"[[modules:composer.uploading, "+e+"%]]"})},success:function(t){const s=t.response.images;if(s&&s.length)for(var d=0;d<s.length;++d)s[d].filename=l[d].name,s[d].isImage=/image./.test(l[d].type);a.callback(s)},complete:function(){a.uploadForm[0].reset(),setTimeout(p.remove,100,f)}}),!1}),a.uploadForm.submit()},u}.apply(E,y),m!==void 0&&(h.exports=m)},52543:(h,E,c)=>{h.exports=c(28721)},65348:(h,E,c)=>{"use strict";var y,m;y=[c(96349),c(33530),c(91749),c(17459)],m=function(p,u,a,l){const f={};return f.init=function(t,s){if(!t||!t.length)return;s=s||{};const d=s.onSelect||function(){};s.states=s.states||["watching","tracking","notwatching","ignoring"],s.template=s.template||"partials/category/selector-dropdown-left",a.fire("action:category.selector.options",{el:t,options:s}),p.init(t,s);const e={el:t,selectedCategory:null};t.on("click","[data-cid]",function(){const n=$(this);return n.hasClass("disabled")?!1:(e.selectCategory(n.attr("data-cid")),d(e.selectedCategory))});let o=e.el.find('[component="category-selector-selected"]').html();return l.translate(o,n=>{o=n}),e.selectCategory=function(n){const i=e.el.find('[data-cid="'+n+'"]');e.selectedCategory={cid:n,name:i.attr("data-name")},i.length?e.el.find('[component="category-selector-selected"]').html(i.find('[component="category-markup"]').html()):e.el.find('[component="category-selector-selected"]').html(o)},e.getSelectedCategory=function(){return e.selectedCategory},e.getSelectedCid=function(){return e.selectedCategory?e.selectedCategory.cid:0},s.hasOwnProperty("selectedCategory")&&app.parseAndTranslate(s.template,{selectedCategory:s.selectedCategory},function(n){e.el.find('[component="category-selector-selected"]').html(n.find('[component="category-selector-selected"]').html())}),e},f.modal=function(t){t=t||{},t.onSelect=t.onSelect||function(){},t.onSubmit=t.onSubmit||function(){},app.parseAndTranslate("admin/partials/categories/select-category",{message:t.message},function(s){const d=u.dialog({title:t.title||"[[modules:composer.select-category]]",message:s,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:o}}}),e=f.init(d.find('[component="category-selector"]'),t);function o(n){return n.preventDefault(),e.selectedCategory&&(t.onSubmit(e.selectedCategory),d.modal("hide")),!1}t.openOnLoad&&d.on("shown.bs.modal",function(){d.find(".dropdown-toggle").dropdown("toggle")}),d.find("form").on("submit",o)})},f}.apply(E,y),m!==void 0&&(h.exports=m)},68636:(h,E,c)=>{"use strict";var y;y=function(){function m(){this._store={},this._keys=[]}m.prototype.isMock=!0,m.prototype.setItem=function(a,l){a=String(a),this._keys.indexOf(a)===-1&&this._keys.push(a),this._store[a]=l},m.prototype.getItem=function(a){return a=String(a),this._keys.indexOf(a)===-1?null:this._store[a]},m.prototype.removeItem=function(a){a=String(a),this._keys=this._keys.filter(function(l){return l!==a}),this._store[a]=null},m.prototype.clear=function(){this._keys=[],this._store={}},m.prototype.key=function(a){return a=parseInt(a,10)||0,this._keys[a]},Object.defineProperty&&Object.defineProperty(m.prototype,"length",{get:function(){return this._keys.length}});let p;const u=Date.now().toString();try{if(p=window.localStorage,p.setItem(u,u),p.getItem(u)!==u)throw Error("localStorage behaved unexpectedly");return p.removeItem(u),p}catch(a){console.warn(a),console.warn("localStorage failed, falling back on sessionStorage");try{if(p=window.sessionStorage,p.setItem(u,u),p.getItem(u)!==u)throw Error("sessionStorage behaved unexpectedly");return p.removeItem(u),p}catch(l){return console.warn(l),console.warn("sessionStorage failed, falling back on memory storage"),new m}}}.call(E,c,E,h),y!==void 0&&(h.exports=y)},69749:(h,E,c)=>{"use strict";var y,m;y=[c(17459),c(68636),c(91749),c(29930),c(89336)],m=function(p,u,a,l,f){const t={current:{}};t.init=function(e){if(!config.searchEnabled)return;e=e||{in:config.searchDefaultInQuick||"titles"},$('[component="search/form"]').each((n,i)=>{s($(i),e)})};function s(e,o){const n=e.find('[component="search/button"]'),i=e.find('[component="search/fields"]'),r=i.find('input[name="query"]'),g=i.find("#quick-search-container"),C=i.hasClass("hidden"),v=/^(@|acct:)?[\w-]+@.+$/;C&&i.off("focusout").on("focusout",function(){setTimeout(function(){i.find(":focus").length||(i.addClass("hidden"),n.removeClass("hidden"))},200)}),r.off("focus");const w={inputEl:r,resultEl:g};t.enableQuickSearch({searchOptions:o,searchElements:w}),n.off("click").on("click",function(k){return!config.loggedIn&&!app.user.privileges["search:content"]?(l.alert({message:"[[error:search-requires-login]]",timeout:3e3}),ajaxify.go("login"),!1):(k.stopPropagation(),t.showAndFocusInput(e),!1)}),e.off("submit").on("submit",function(){const k=$(this).find('input[name="query"]'),S=t.getSearchPreferences();return S.term=k.val(),S.in=o.in,v.test(S.term)&&(S.in="users"),a.fire("action:search.submit",{searchOptions:S,searchElements:w}),t.query(S,function(){k.val(""),r.trigger("blur")}),!1})}t.enableQuickSearch=function(e){if(!config.searchEnabled||!app.user.privileges["search:content"])return;const o=Object.assign({in:config.searchDefaultInQuick||"titles"},e.searchOptions),n=e.searchElements.resultEl,i=e.searchElements.inputEl;let r=i.val();const g=n.find(".filter-category");function C(){ajaxify.data.template.category&&ajaxify.data.cid&&p.translate("[[search:search-in-category, "+ajaxify.data.name+"]]",function(x){const b=$("<div></div>").html(x).text();g.find(".name").text(b)}),g.toggleClass("hidden",!(ajaxify.data.template.category&&ajaxify.data.cid))}function v(){e.searchOptions=Object.assign({},o),e.searchOptions.term=i.val(),C(),ajaxify.data.template.category&&ajaxify.data.cid&&g.find('input[type="checkbox"]').is(":checked")&&(e.searchOptions.categories=[ajaxify.data.cid],e.searchOptions.searchChildren=!0),e.hideDuringSearch||(n.removeClass("hidden").find(".quick-search-results-container").html(""),n.find(".loading-indicator").removeClass("hidden")),a.fire("action:search.quick.start",e),e.searchOptions.searchOnly=1,t.api(e.searchOptions,function(x){if(n.find(".loading-indicator").addClass("hidden"),e.searchOptions.in==="categories"){if(!x.categories||e.hideOnNoMatches&&!x.categories.length)return n.addClass("hidden").find(".quick-search-results-container").html("");x.dropdown={maxWidth:"400px",maxHeight:"500px",...e.dropdown},app.parseAndTranslate("partials/quick-category-search-results",x,b=>{b.length&&b.find(".timeago").timeago(),n.toggleClass("hidden",!b.length||!i.is(":focus")).find(".quick-search-results-container").html(b.length?b:""),a.fire("action:search.quick.complete",{data:x,options:e})})}else{if(!x.posts||e.hideOnNoMatches&&!x.posts.length)return n.addClass("hidden").find(".quick-search-results-container").html("");x.posts.forEach(function(b){const _=$("<div>"+b.content+"</div>").text(),I=i.val().toLowerCase().replace(/^in:topic-\d+/,""),D=Math.max(0,_.toLowerCase().indexOf(I)-40);b.snippet=utils.escapeHTML((D>0?"...":"")+_.slice(D,D+80)+(_.length-D>80?"...":""))}),x.dropdown={maxWidth:"400px",maxHeight:"500px",...e.dropdown},app.parseAndTranslate("partials/quick-search-results",x,function(b){b.length&&b.find(".timeago").timeago(),n.toggleClass("hidden",!b.length||!i.is(":focus")).find(".quick-search-results-container").html(b.length?b:"");const _=n.find(".quick-search-results .quick-search-title, .quick-search-results .snippet");t.highlightMatches(e.searchOptions.term,_),a.fire("action:search.quick.complete",{data:x,options:e})})}})}n.find('.filter-category input[type="checkbox"]').on("change",function(){i.focus(),v()}),i.off("keyup").on("keyup",utils.debounce(function(){if(i.val().length<3){n.addClass("hidden"),r=i.val();return}if(i.val()!==r){if(r=i.val(),!i.is(":focus"))return n.addClass("hidden");v()}},500)),n.on("mousedown",".quick-search-results > *",function(){$(window).one("mouseup",function(){n.addClass("hidden")})});const w=i.parent(),k=n.parent();w.on("focusout",S),k.on("focusout",S);function S(){setTimeout(function(){!w.find(":focus").length&&!k.find(":focus").length&&!n.hasClass("hidden")&&n.addClass("hidden")},200)}let A=!1;a.on("action:ajaxify.end",function(){ajaxify.isCold()||(A=!0),n.addClass("hidden")}),i.on("focus",function(){const x=i.val();r=x,x&&n.find("#quick-search-results").children().length&&(C(),A?(v(),A=!1):n.removeClass("hidden"),i[0].setSelectionRange(x.startsWith("in:topic")?x.indexOf(" ")+1:0,x.length))}),i.off("refresh").on("refresh",function(){v()})},t.showAndFocusInput=function(e){const o=e.parents(".dropdown-menu");if(o.length){const n=o.siblings("[data-bs-toggle]"),i=f.Dropdown.getOrCreateInstance(n[0]);i&&i.show()}else e.find('[component="search/fields"]').removeClass("hidden"),e.find('[component="search/button"]').addClass("hidden"),e.find('[component="search/fields"] input[name="query"]').trigger("focus")},t.query=function(e,o){o=o||function(){},ajaxify.go("search?"+d(e),o)},t.api=function(e,o){const n=config.relative_path+"/api/search?"+d(e);e.hasOwnProperty("searchOnly")&&delete e.searchOnly;const i=config.relative_path+"/search?"+d(e);$.get(n,function(r){r.url=i,o(r)})};function d(e){const o=e.in||"titles",n=e.term.replace(/^[ ?#]*/,""),i={...e,term:n,in:o};return a.fire("action:search.createQueryString",{query:i,data:e}),$.param(i)}return t.getSearchPreferences=function(){try{return JSON.parse(u.getItem("search-preferences")||"{}")}catch(e){return console.error(e),{}}},t.highlightMatches=function(e,o){if(!e||!o.length)return;e=utils.escapeHTML(e.replace(/^"/,"").replace(/"$/,"").trim());const n=e.split(" ").filter(r=>r.length>1).map(function(r){return utils.escapeRegexChars(r)}).join("|"),i=new RegExp("("+n+")","gi");o.each(function(){const r=$(this),g=[];r.find("*").each(function(){$(this).after("<!-- "+g.length+" -->"),g.push($("<div></div>").append($(this)))}),r.html(r.html().replace(i,function(C,v){return'<strong class="search-match fw-bold text-decoration-underline">'+v+"</strong>"})),g.forEach(function(C,v){r.html(r.html().replace("<!-- "+v+" -->",function(){return C.html()}))})}),$(".search-results .content").find("img:not(.not-responsive)").addClass("img-fluid")},t}.apply(E,y),m!==void 0&&(h.exports=m)},71431:(h,E,c)=>{h.exports=c(49641)},72573:(h,E,c)=>{h.exports=c(59367)},88518:(h,E,c)=>{h.exports=c(54516)},92762:(h,E,c)=>{h.exports=c(94252)},96349:(h,E,c)=>{"use strict";var y,m;y=[c(29930),c(89336),c(49897)],m=function(p,u,a){const l={};return l.init=function(f,t){let s=t.defaultCategories||null;t=t||{},t.privilege=t.privilege||"topics:read",t.states=t.states||["watching","tracking","notwatching","ignoring"],t.cacheList=t.hasOwnProperty("cacheList")?t.cacheList:!0;let d=[];Array.isArray(t.localCategories)&&(d=t.localCategories.map(r=>({...r})),s&&(s=[...d,...s])),t.selectedCids=t.selectedCids||ajaxify.data.selectedCids||[];const e=f.find('[component="category-selector-search"]');if(!e.length)return;const o=e.parents('[component="category/dropdown"]').length>0||e.parents('[component="category-selector"]').length>0;f.on("show.bs.dropdown",function(){o&&e.removeClass("hidden");function r(){const g=e.find("input").val();g.length>1||!g&&!s?n(g,function(C){s=t.cacheList&&(s||C),i(C)}):!g&&s&&i(s)}e.on("click",function(g){g.preventDefault(),g.stopPropagation()}),e.find("input").val("").on("keyup",utils.debounce(r,300)),r()}),f.on("shown.bs.dropdown",function(){["xs","sm"].includes(utils.findBootstrapEnvironment())||e.find("input").focus()}),f.on("hide.bs.dropdown",function(){o&&e.addClass("hidden"),e.off("click"),e.find("input").off("keyup")});function n(r,g){a.get("/search/categories",{search:r,query:utils.params(),parentCid:t.parentCid||0,selectedCids:t.selectedCids,privilege:t.privilege,states:t.states,showLinks:t.showLinks},function(C,{categories:v}){if(C)return p.error(C);g(d.concat(v))})}function i(r){const g=t.selectedCids.map(String);r.forEach(function(C){C.selected=g.includes(String(C.cid))}),app.parseAndTranslate(t.template,{categoryItems:r.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},function(C){f.find('[component="category/list"]').html(C.find('[component="category/list"]').html()),f.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!r.length);const v=u.Dropdown.getInstance(f.find(".dropdown-toggle").get(0));v&&v.update()})}},l}.apply(E,y),m!==void 0&&(h.exports=m)}}]);
