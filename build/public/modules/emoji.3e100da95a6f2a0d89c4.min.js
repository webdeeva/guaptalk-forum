(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[74953],{20460:function(A,R,l){var P,w,D=this&&this.__awaiter||function(g,c,e,v){function u(t){return t instanceof e?t:new e(function(f){f(t)})}return new(e||(e=Promise))(function(t,f){function a(r){try{n(v.next(r))}catch(h){f(h)}}function y(r){try{n(v.throw(r))}catch(h){f(h)}}function n(r){r.done?t(r.value):u(r.value).then(a,y)}n((v=v.apply(g,c||[])).next())})},I=this&&this.__generator||function(g,c){var e={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},v,u,t,f=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return f.next=a(0),f.throw=a(1),f.return=a(2),typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function a(n){return function(r){return y([n,r])}}function y(n){if(v)throw new TypeError("Generator is already executing.");for(;f&&(f=0,n[0]&&(e=0)),e;)try{if(v=1,u&&(t=n[0]&2?u.return:n[0]?u.throw||((t=u.return)&&t.call(u),0):u.next)&&!(t=t.call(u,n[1])).done)return t;switch(u=0,t&&(n=[n[0]&2,t.value]),n[0]){case 0:case 1:t=n;break;case 4:return e.label++,{value:n[1],done:!1};case 5:e.label++,u=n[1],n=[0];continue;case 7:n=e.ops.pop(),e.trys.pop();continue;default:if(t=e.trys,!(t=t.length>0&&t[t.length-1])&&(n[0]===6||n[0]===2)){e=0;continue}if(n[0]===3&&(!t||n[1]>t[0]&&n[1]<t[3])){e.label=n[1];break}if(n[0]===6&&e.label<t[1]){e.label=t[1],t=n;break}if(t&&e.label<t[2]){e.label=t[2],e.ops.push(n);break}t[2]&&e.ops.pop(),e.trys.pop();continue}n=c.call(g,e)}catch(r){n=[6,r],u=0}finally{v=t=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}};P=[l,R],w=function(g,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.strategy=c.search=c.table=c.buster=c.base=void 0,c.buildEmoji=u,c.init=f;var e="".concat(config.assetBaseUrl,"/plugins/nodebb-plugin-emoji");c.base=e;var v=config["cache-buster"];c.buster=v;function u(a,y){var n=":".concat(a.name,":"),r=y?" defer":"";return a.image?`<img
      `.concat(y?"data-":"",'src="').concat(e,"/emoji/").concat(a.pack,"/").concat(a.image,"?").concat(v,`"
      class="not-responsive emoji emoji-`).concat(a.pack," emoji--").concat(a.name," ").concat(r,`"
      title="`).concat(n,`"
      alt="`).concat(a.character,`"
    />`):`<span
    class="emoji-`.concat(a.pack," emoji--").concat(a.name,`"
    title="`).concat(n,`"
  ><span>`).concat(a.character,"</span></span>")}c.strategy={match:/\B:([^\s\n:]+)$/,search:function(a,y){y((0,c.search)(a.toLowerCase().replace(/[_-]/g,"")).slice(0,10))},index:1,replace:function(a){return":".concat(a.name,": ")},template:function(a){return"".concat(u(a)," ").concat(a.name)},cache:!0};var t;function f(a){var y=this;return t=t||Promise.all([new Promise(function(n,r){l.e(30363).then(function(){var h=[l(89713)];n.apply(null,h)}.bind(this)).catch(r.bind(this))}),new Promise(function(n,r){l.e(95983).then(function(){var h=[l(30593)];n.apply(null,h)}.bind(this)).catch(r.bind(this))}),new Promise(function(n,r){Promise.all([l.e(23662),l.e(65285),l.e(449),l.e(88189)]).then(function(){var h=[l(449)];n.apply(null,h)}.bind(this)).catch(r.bind(this))}),$.getJSON("".concat(e,"/emoji/table.json?").concat(v))]).then(function(n){var r=n[0],h=n[1],E=n[2],B=n[3];c.table=B;var M=Object.keys(c.table).map(function(d){var o=c.table[d];return{name:d,aliases:o.aliases,keywords:o.keywords,character:o.character,image:o.image,pack:o.pack}});function C(d,o){for(var i=o.length,s=0;s<i;s+=1)if(r(d,o[s]))return o[s];return null}function W(d){function o(i,s){var b=s*(1+h(d,i));return i.startsWith(d)?b-2:b}return M.filter(function(i){if(r(d,i.name))return i.score=o(i.name,1),!0;var s=C(d,i.aliases);if(s)return i.score=o(s,3),!0;var b=C(d,i.keywords);return b?(i.score=o(b,7),!0):!1}).sort(function(i,s){return i.score-s.score}).sort(function(i,s){var b=+i.name.startsWith(d),m=+s.name.startsWith(d);return m-b})}c.search=W,E.addButtonDispatch("emoji-add-emoji",function(d,o,i,s){new Promise(function(b,m){l.e(86924).then(function(){var k=[l(86924)];b.apply(null,k)}.bind(this)).catch(m.bind(this))}).then(function(b){var m=b.toggleForInsert;return m(d,o,i,s)})})}).catch(function(n){return D(y,void 0,void 0,function(){var r,h;return I(this,function(E){switch(E.label){case 0:return r=Error("[[emoji:meta-load-failed]]"),console.error(r),[4,app.require("alerts")];case 1:throw h=E.sent(),h.error(r),n}})})}),a&&t.then(function(){return setTimeout(a,0)}),t}}.apply(R,P),w!==void 0&&(A.exports=w)},46243:(A,R,l)=>{A.exports=l(20460)}}]);
