"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[34405],{34405:(y,g,d)=>{var m,l;m=[d(49897),d(29930),d(36e3),d(9787),d(35786)],l=function(h,s,{Textcomplete:b},{TextareaEditor:E},{ContenteditableEditor:A}){const c={},x={delay:200,appendTo:null};c.init=u=>{const t={...x,...u},{input:i,onSelect:e}=t;app.loadJQueryUI(function(){i.autocomplete({...t,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(n,o){v(i,e,n,o)}})})},c.user=function(u,t,i){typeof t=="function"&&(i=t,t={}),t=t||{},c.init({input:u,onSelect:i,source:(e,n)=>{t.query=e.term,h.get("/api/users",t,function(o,f){if(o)return s.error(o);if(f&&f.users){const r=f.users.map(function(a){const p=$("<div></div>").html(a.username).text();return a&&{label:p,value:p,user:{uid:a.uid,name:a.username,slug:a.userslug,username:a.username,userslug:a.userslug,displayname:a.displayname,picture:a.picture,banned:a.banned,"icon:text":a["icon:text"],"icon:bgColor":a["icon:bgColor"]}}});n(r)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},c.group=function(u,t){c.init({input:u,onSelect:t,source:(i,e)=>{socket.emit("groups.search",{query:i.term},function(n,o){if(n)return s.error(n);if(o&&o.length){const f=o.map(function(r){return r&&{label:r.name,value:r.name,group:r}});e(f)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},c.tag=function(u,t){c.init({input:u,onSelect:t,delay:100,source:(i,e)=>{socket.emit("topics.autocompleteTags",{query:i.term,cid:ajaxify.data.cid||0},function(n,o){if(n)return s.error(n);o&&e(o),$(".ui-autocomplete a").attr("data-ajaxify","false")})}})};function v(u,t,i,e){t=t||function(){};const n=jQuery.Event("keypress");n.which=13,n.keyCode=13,setTimeout(function(){u.trigger(n)},100),t(i,e)}return c.setup=function({element:u,strategies:t,options:i}){const e=u.get(0);if(e){var n;if(e.nodeName==="TEXTAREA"||e.nodeName==="INPUT"?n=new E(e):e.nodeName==="DIV"&&e.getAttribute("contenteditable")==="true"&&(n=new A(e)),!n)throw new Error("unknown target element type");e.setAttribute("dir",document.querySelector("html").getAttribute("data-dir"));var o=new b(n,t,{dropdown:i});return o.on("rendered",function(){o.dropdown.items.length&&o.dropdown.items[0].activate()}),o}},c}.apply(g,m),l!==void 0&&(y.exports=l)}}]);
